;*********************************************************************************
;
;
;	K17 말내에서 사용하는 이벤트 계 함수군
;
;	□목차	^[ \t]*(@)로 아우트라인 엄선
;
;K17_DATE_EVENT_RELIEF			데이트 이벤트 재판정용
;K17_TALENT_UPDOWN				소질의 조작
;K17_FIRSTKISS					첫키스-MASTER용
;K17_FIRSTKISS_ALICE			첫키스-앨리스용
;K17_CHECK_시간정지들킴 시간정지들킴의 조건식
;K17_시간정지들킴				MASTER의 시간정지들킴시의 텍스트
;K17_난교개시 각처의 난교 개시 텍스트를 합체
;K17_덮치기 허덕 타입 선택 덮치기시의 타입 선택
;K17_처녀상실 처녀상실했을 때의 이벤트
;K17_우후후 감상 싸우는 후후의 종료시의 이벤트
;K17_억지로질내사정 가치레이프시
;K17_RELATION_EV				관계성이 진행되었을 때에 부르는 용힌트 표시 있어
;K17_RELATION_ANNOUNCE			RELATION_EV가 불렸을 때에 실제 표시하는 용
;K17_HINT						힌트의 표시
;K17_욕실이벤트 외에서도 사용할 수 있도록(듯이) 조금 손질 하고 싶다
;K17_샹하이이벤트 덤
;K17_딸딸이들킴추가이벤트딸딸이들킴이벤트의 추가 확장 이벤트
;K17_ONABARE					본체의 것을 개조한 것 동거(同居) 자위로 사용한다
;K17_NASIKUZUSI					전술
;
;*********************************************************************************


;*********************************************************************************
;		DATE_EVENT를 코피페, 개조
;
;	이 말에서는 본체의 조건으로부터 빗나葯?
;	M_KOJO_SPEVENT_K17_3　(으)로부터　M_KOJO_SPEVENT_K17_1　M_KOJO_SPEVENT_K17_2　에 들어若?
;
;	본체 기존의 DATE_EVENT에 조금 손질
;	SP_EVENT3, 인수 0(통상 귀가)의 머리에 넣어, 이벤트 통과 플래그(CFLAG:17:1004, 1005)로 판정 재차 호출
;	이제(벌써) 첫키스 키스 했을 경우, 이벤트를 캔슬했을 경우등의 구제
;	고백해 연인이 되는 이벤트도 MASTER에 연인이 있어도 발생(2명째의 연인이 된다든가는 할 수 없다)
;	이 판정에 들어XX 트리거는 TCVAR:17:351
;	완주 판정은 TCVAR:17:350
;	일일일회만 어느 쪽인가의 이벤트를 완주할 수 있는, 판정은 몇 번이라도
;
;	데이트 이벤트 전체의 흐름
;	SPEVENT_K17_1 판정(데이트 키스)→SPEVENT_K17_3(반발각인 소거)→SPEVENT_K17_2 판정(고백)→
;	SPEVENT_K17_3(통상 종료)→K17_DATE_EVENT_RELIEF(여기)→SPEVENT_K17_3(통상 종료의 남은 이후)
;
;	고백 이베는 원파일로부터 CALL 되고 있는 이상 피할 수 굇?때문에 SPEVENT_K17_1내 선택지 스킵 사양
;	이쪽으로부터 불려 데이트 이벤트에 돌아왔을 때는 통상 대로
;	괜찮은가 이것 꽤 복잡XX게 너무 XX고 있다
;
;*********************************************************************************
;FileName_DATE_CMN.ERB ----------------------------- Rev1. 01
;데이트 돌아가 이벤트 (CFLAG:13)
;CALL		USER
;ARG		캐릭터 NO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@K17_DATE_EVENT_RELIEF(ARG)
TCVAR:K17C_ID:키스캔슬=0

VARSET LOCAL
;캔슬 플래그(외부 참조에서 사용예:LOCAL@DATE_EVENT:99 = 1
;LOCAL:99 = 0
;파라미터에 의한 발생 기초치 생성

LOCAL = MARK:ARG:괘씸각인 * 10 + MARK:ARG:쾌락각인 * 10
IF TALENT:ARG:연모
	LOCAL += MIN(ABL:ARG:친밀 * 10, 100) + MIN(ABL:ARG:욕망 * 10,100) + MIN(ABL:ARG:봉사정신 * 10,100)
	LOCAL += MIN(EXP:ARG:데이트경험, 100) + MIN(EXP:ARG:애정경험, 100)
ELSEIF TALENT:ARG:사모
	LOCAL += MIN(ABL:ARG:친밀 * 10, 50) + MIN(ABL:ARG:욕망 * 10,50) + MIN(ABL:ARG:봉사정신 * 10,50)
	LOCAL += MIN(EXP:ARG:데이트경험, 50)
ENDIF
LOCAL += GETPALAMLV(PALAM:ARG:욕정, 10) * 5 + GETPALAMLV(PALAM:ARG:호의, 10) * 5 + GETPALAMLV(PALAM:ARG:공순, 10) * 5
;60
LOCAL += BASE:ARG:무드 / 50 + (1000 - BASE:ARG:이성) / 30
LOCAL += TALENT:ARG:담력 * 10 + TALENT:ARG:성적흥미 * 10 - TALENT:ARG:자제심 * 10 - TALENT:ARG:무관심 * 10 

;이 판정과 키스 관계 제거
;합의없음(키스 성공하지 않다)
;ELSEIF !(CFLAG:ARG:1 & 1) && !(CFLAG:ARG:13 & 1)

;성공 판정
IF (LOCAL > 220 + TALENT:ARG:일선을넘지않음 * 30 + TALENT:ARG:키스미경험 * 20) && CFLAG:ARG:합의판정 > 180 && (TALENT:ARG:사모 || TALENT:ARG:연모) && !CFLAG:K17C_ID:K17C_CF_데이트이벤트
	CALL KOJO_MESSAGE_SEND("SP_EVENT", 1, ARG, 0)
	;캔슬 플래그
	IF !TCVAR:ARG:키스캔슬
		IF TALENT:MASTER:키스미경험
			CALL SET_FIRSTKISS(MASTER, ARG, 1)
			EXP:ARG:애정경험 += 10
		ENDIF
		IF TALENT:ARG:키스미경험
			CALL SET_FIRSTKISS(ARG, MASTER, 1)
			EXP:ARG:키스경험 ++
			EXP:MASTER:키스경험 ++
		EXP:ARG:애정경험 += 10
		ENDIF
		SETBIT CFLAG:ARG:기정사실 , 0
		SETBIT CFLAG:ARG:데이트후이벤트플래그 , 0
	ENDIF
	RETURN 1
;고백하고 있지 않다(MASTER에 연인이 없다)
;ELSEIF !(CFLAG:ARG:1 & 4) && !(CFLAG:ARG:13 & 2) && !TALENT:MASTER:연인
;고백 이벤트	;성공 판정
ELSEIF CFLAG:K17C_ID:K17C_CF_데이트이벤트 && (LOCAL > 530 + TALENT:ARG:일선을넘지않음 * 20)

	CALL KOJO_MESSAGE_SEND("SP_EVENT", 2, ARG, 0)
	;연인이 되는 선택지는 여기에 위의 이벤트에서도 판정해 둔다
	IF !(CFLAG:ARG:1 & 4) && !TALENT:MASTER:연인
		PRINTFORML %CALLNAME:ARG%의 고백을…
		PRINTFORM [1] - 받는다
		PRINTL 　- 연인 소질은 1명 밖에 취득할 수 없습니다 -
		PRINTFORM [2] - 거절?다
		$INPUT_LOOP
		INPUT
		IF RESULT > 2 || RESULT < 1
			CLEARLINE 1
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			SETBIT CFLAG:ARG:기정사실 , 2
			SETBIT CFLAG:MASTER:기정사실, 2
			TALENT:MASTER:연인 = NO:ARG
			TALENT:ARG:연인 = 1
			SETBIT CFLAG:ARG:데이트후이벤트플래그 , 1
			CALL KOJO_MESSAGE_SEND("SP_EVENT", 2, ARG, RESULT)
			PRINTL
			PRINTFORMW %CALLNAME:ARG%와 연인이 되었습니다
			RETURN 1
		ELSE
			CALL KOJO_MESSAGE_SEND("SP_EVENT", 2, ARG, RESULT)
			RETURN 1
		ENDIF
	ENDIF

ELSEIF !MARK:ARG:반발각인
	;개조전의 이 지점에 들어간 것을 다시 한 번 여기서 재평가한다
	;여기서 돌아오므로 1회 판정만 한 번 제외한다
	;보통으로 실패
	TCVAR:K17C_ID:K17C_TC_데이트이베판정=1
	RETURN 0
	;CALL KOJO_MESSAGE_SEND("SP_EVENT", 3, ARG, 0)
ENDIF
;반발로 지워 실패
;후라그리세
TCVAR:K17C_ID:K17C_TC_데이트이베판정=1
RETURN 0



;*********************************************************************************
;	소질의 조작
;	
;	개요
;	말내 이벤트로 상하
;	개서 플래그 잊을 것 같게 되므로 여기서 일괄처리
;	소질에 대해서 1~-1(솔직함 없음 반항적인 ) 범위에서 조작
;	지금으로서 대응江?있는 번호
;	·자존심	13	K17C_TALENT_자존심	1 자존심 높음∼0 없음~자존심 낮음
;	·태도		11	K17C_TALENT_태도		1 솔직함~0 없음∼-1반항적
;
;	09/05	0때의―2라든지 생각해 오버플로우 대책 덧붙여 씀 여러가지 지나치게 생각해 더럽다
;	09/08	LIMIT로 한←편리!
;
;	변수	：CFLAG:17:1001　말전체로 개서를 실시할까의 플래그　0, 1으로 고쳐 써-1로 하지 않는다
;	인수 0	：캐릭터 ID
;	변수 1	：고쳐 ?] 소질번호
;	변수 2	：고쳐 쓰는 수치
;	반환값	：고쳐 쓰면(자) 1　고쳐 \지 않았으면 0
;*********************************************************************************
@K17_TALENT_UPDOWN(ARG=K17C_ID, ARG:1, ARG:2)
VARSET LOCAL
;개서 플래그
SIF CFLAG:K17C_ID:K17C_CF_소질변화플래그 < 0 || ARG!=K17C_ID
	RETURN 0
;현재 이미 최고치라면 돌려준다	
SIF TALENT:ARG:(ARG:1) == -1 && ARG:2 < 0
	RETURN 0
SIF TALENT:ARG:(ARG:1) == 1 && ARG:2 > 0
	RETURN 0

;원래 값을 보존
LOCAL = TALENT:ARG:(ARG:1)

PRINTL
SELECTCASE ARG:1
	;자존심　
	;자존심　1에서도 2에서도 잃는⇔잡기 반환으로 좋은가
	CASE  K17C_TALENT_자존심
		LIMIT (TALENT:ARG:(ARG:1)) +ARG:2,-1, 1
		TALENT:ARG:(ARG:1) = RESULT
		;정부를 본다
		IF ARG:2<0
			PRINTFORMD %CALLNAME:ARG%는 [자존심]을 잃었다
			
		ELSEIF ARG:2>0
			PRINTFORMD %CALLNAME:ARG%는 [자존심]을 되찾았다
		ENDIF
		
	;태도
	CASE K17C_TALENT_태도
		LIMIT (TALENT:ARG:(ARG:1)) +ARG:2,-1, 1
		TALENT:ARG:(ARG:1) = RESULT
		;내릴 때
		IF ARG:2<0
			;반항적→소멸
			SIF TALENT:ARG:(ARG:1) <= 0 && LOCAL==1
				PRINTFORMD %CALLNAME:ARG%는 [반항적]을 잃었다
			SIF !LINEISEMPTY()
				PRINTW
			;없음→솔직함
			SIF TALENT:ARG:(ARG:1) == -1 && LOCAL>=0
				PRINTFORMD %CALLNAME:ARG%는 [솔직함]이 되었다
		ELSEIF ARG:2>0
			;올릴 때
			SIF TALENT:ARG:(ARG:1) >= 0 && LOCAL==-1
				PRINTFORMD %CALLNAME:ARG%는 [솔직함]을 잃었다
			SIF !LINEISEMPTY()
				PRINTW
			SIF TALENT:ARG:(ARG:1) == 1 && LOCAL!=1
				PRINTFORMD %CALLNAME:ARG%는 [반항적]이 되었다
		ENDIF
	;추가하면(자) 여기에 CASE 만든다
	CASEELSE
		PRINTFORMDL 상정외의 TALENT를 조작 했습니다　K17_TALENT_UPDOWN
		PRINTFORML 「에러 났으니깐 보고해 %K17_HEART()%」
ENDSELECT
SIF !LINEISEMPTY()
	PRINTW
RETURN 1

;*********************************************************************************
;	첫키스 이벤트
;	처음으로 키스가 불렸을 때의 말을 여기에 책실구
;	경험에 관계없이 MASTER(플레이어로부터) 능동적으로 의식로 부른 용
;
;	09/05	미묘한 장면이므로 이름 불러에 고정
;
;	인수 0	：캐릭터 ID
;	반환값	：통과 첫회만 1　두번째 이후 0
;*********************************************************************************
@K17_FIRSTKISS(ARG)

IF CFLAG:K17C_ID:K17C_CF_FK마스터
	CFLAG:K17C_ID:K17C_CF_FK마스터 = MIN(CFLAG:K17C_ID:K17C_CF_FK마스터+1, 10000)
	RETURN 0
ELSE
	SELECTCASE K17_GRT(ARG)
		CASE IS >= K17C_연모
			PRINTFORML 「키스 하고 싶은거야?」
			PRINTFORMW 「응―……츄 %K17_HEART()%」
			PRINTFORML 「좀 더……하암 %K17_HEART()%　……쮸웁 %K17_HEART()%」
			PRINTFORML 「하아……%K17_HEART()%　드디어……해줬다 %K17_HEART()%」
			PRINTFORMDL 혹시 기다리게 해버린 걸까……
			PRINTFORML 「정말, 괜찮아. 신경쓰지 마, %CALLNAME:MASTER%」
			PRINTFORML 「이제부터라도 좀 더 많이 해줘」
		CASE IS >= K17C_사모
			IF ABL:ARG:친밀 >= 7
				PRINTFORML 「키스……하고 싶은거야?」
				PRINTFORMW 「응……%CALLNAME:MASTER%……츄 %K17_HEART()%」
				PRINTFORML 「엣……에헤헤……」
				PRINTFORMDL 나도 모르게 해버렸지만, 괜찮은 걸까……
				PRINTFORML 「뭐라 해야 될려나…… 부끄러워 %K17_BLUSH()%」
			ELSE
				PRINTFORML 「에?　키, 키스?」
				PRINTFORMW 「아……%K17_BLUSH()%」
				PRINTFORML 「엣, 뭐야 갑자기……」
				PRINTFORMDL 무심코 해버렸지만, 싫었던 걸까
				PRINTFORML 「언젠가 할 거라고는 생각했지만, 너무 갑작스럽잖아, 정말 %K17_BLUSH()%」
			ENDIF
		CASE IS >= K17C_친구
			PRINTFORML 「엣, %K17_CNAME()%, 이런 짓…… 하고 싶었던 거네……」
			PRINTFORMDL 무심코 해버렸지만, 싫었던 걸까
			PRINTFORML 「…………」
		CASEELSE
			PRINTFORMW 「읏…………」
			PRINTFORMDL 무심코 해버렸지만, 싫었던 걸까
			PRINTFORML 「…………최저」
			
	ENDSELECT
	
	
	
	;진짜 첫키스
	
	IF K17_GRT(ARG)>=K17C_사모 && !CFLAG:K17C_ID:K17C_CF_FK && !TALENT:ARG:키스미경험
		;사모↑
		PRINTW
		;시간정지중의 키스로 키스경험 올라버리는 지요 어떻게 하지
		;미경험은 말 불리는 앞에 사라져버리는……미경험이었는지와 와 쿨
		;지금으로서 걸레에서도 키스미경험인 채이므로 방치일까
		IF EXP:ARG:키스경험 == 1
			PRINTFORML 「나……처음……」
			PRINTFORMDL %CALLNAME:TARGET%의 키스는 외형과는 정반대로 엄청 풋풋했다
			PRINTW
		ENDIF
		IF (EXP:MASTER:키스경험 == 1)
			PRINTFORML 「%CALLNAME:MASTER%도 처음이었어?」
			PRINTFORML 「그래……(다행이다……)」
			PRINTFORMDL 서로의 마음이 통한 것 같은 기분이 들었다
			PRINTW
		ENDIF
		
	ELSEIF !CFLAG:K17C_ID:K17C_CF_FK && (EXP:MASTER:키스경험 == 1)
		;아는 사람 정도
		PRINTW
		IF K17_GRT(ARG) >= K17C_친구
			;사이가 좋아져 초
			PRINTFORML 「내 처음…… 이거보단 좀 더…… 제대로 된 분위기에서 하고 싶었는데」
			PRINTFORMDL %타겟은% 매우 불만스러워 했다
			IF (EXP:MASTER:키스경험 == 1)
				PRINTFORML 「%K17_CNAME()%처음이었어?」
				IF TALENT:MASTER:성별 == 2
					PRINTFORML 「그래……남자들은 그런 거엔 그다지 신경 쓰지 않는걸까……」
				ELSE
					PRINTFORML 「……여자아이인데도 처음이란 거에 그다지 신경 쓰지 않는 거구나……」
				ENDIF
			ENDIF
			SIF !CFLAG:K17C_ID:K17C_CF_데이트이벤트
				PRINTFORML 「이쪽의 계획이 엉망으로 돼버렸잖아, 정말」
		ELSE
			;타인
			PRINTFORML 「…………읏!」
			PRINTFORMDL 짜악!　이란 소리와 함께 엄청난 따귀가 날아 왔다
			SIF CFLAG:TARGET:약점잡힘
				PRINTFORML 「약점을 잡혔다고는 해도, 나는 당신의 인형 같은게 아냐……」
			PRINTFORMDL %CALLNAME:TARGET%의 눈에 눈물이 조금 맺혀 있었다……
			BASE:ARG:분노 += 1000
		ENDIF
	ENDIF
	
	;무드 평가
	IF K17_GRT(ARG) >= K17C_사모
		SELECTCASE BASE:ARG:무드
			CASE IS >= 750
				PRINTFORML 「최고의 무드였어……」
			CASE IS >= 500
				PRINTFORML 「무드에 조금만 더 신경 썼다면 더 좋았을 텐데」
			CASEELSE
				PRINTFORML 「다음에는 무드란 것도 좀 신경 써줘?」
		ENDSELECT
	ENDIF
	
	
	
	;어느 쪽으로부터 했는지를 보존
	SIF CFLAG:K17C_ID:K17C_CF_FK == 0
		CFLAG:K17C_ID:K17C_CF_FK = -1
	
	CFLAG:K17C_ID:K17C_CF_FK마스터++
	TRYCALL K17_RELATION_EV( K17C_RTF_키스 )
	RETURN 1
ENDIF

RETURN 0

;*********************************************************************************
;	첫키스(앨리스) 이벤트
;	호방편이 M_KOJO_SPEVENT_K17_1, 카운터 커맨드 어떤의 것으로
;	처음으로 키스가 불렸을 때의 말을 여기에 책실구
;	경험에 관계없이 앨리스로부터 처음으로 했을 때 용
;
;	09/05	미묘한 장면이므로 이름 불러에 고정
;
;	인수 0	：캐릭터 ID
;	반환값	：통과 첫회만 1　두번째 이후 0
;*********************************************************************************
@K17_FIRSTKISS_ALICE(ARG)

IF CFLAG:K17C_ID:K17C_CF_FK앨리스
	CFLAG:K17C_ID:K17C_CF_FK앨리스 = MIN(CFLAG:K17C_ID:K17C_CF_FK앨리스+1, 10000)
	RETURN 0
ELSE
	SELECTCASE K17_GRT(ARG)
		CASE IS >= K17C_연모
			PRINTFORML 「사랑해……」
			PRINTFORML 「키스, 하자?　응……쪽 %K17_HEART()%」
			PRINTFORMDL %마스터는% %CALLNAME:TARGET%의 키스를 받아들였다……
			PRINTFORML 「후훗, 처음으로 내 쪽에서 먼저 한 키스야」
		CASE IS >= K17C_사모
			PRINTFORML 「좋아해……쪽 %K17_HEART()%」
			PRINTFORMDL %마스터는% %CALLNAME:TARGET%에게 갑작스레 키스 받았다……
			PRINTFORML 「처음으로 내 쪽에서 먼저 한 키스야」
		CASEELSE
			PRINTFORML 「쪽」
			PRINTFORMDL %마스터는% %CALLNAME:TARGET%에게 갑작스레 키스 받았다……
			PRINTFORML 「내 쪽에서 먼저 하게 만들다니……대체 나한테 무슨 짓을 한 거야, 얄궂은 사람」
	ENDSELECT
	
	;진짜 첫키스 사모 이상
	IF K17_GRT(ARG)>=K17C_사모 && !CFLAG:K17C_ID:K17C_CF_FK && !TALENT:ARG:키스미경험
		;커맨드 호출용　M_KOJO_SPEVENT_K17_1은 별도 준비
		IF EXP:MASTER:키스경험 == 1
			PRINTFORML 「%CALLNAME:MASTER%의 처음, 내가 받아 버렸네」
			PRINTFORML 「나도 처음이 %CALLNAME:MASTER%이라 좋았어……」
			PRINTFORMDL 서로의 마음이 통한 것 같은 기분이 들었다
			
		ELSE
			PRINTFORML 「내 처음이야」
			PRINTFORMDL %CALLNAME:TARGET%의 키스는 외형과는 정반대로 풋풋했다
		ENDIF
	ENDIF
	
	
	
	;어느 쪽으로부터 했는지를 보존
	SIF CFLAG:K17C_ID:K17C_CF_FK == 0
		CFLAG:K17C_ID:K17C_CF_FK = 1
	
	CFLAG:K17C_ID:K17C_CF_FK앨리스++
	TRYCALL K17_RELATION_EV( K17C_RTF_키스 )
	RETURN 1
ENDIF

RETURN 0

;*********************************************************************************
;	시간정지들킴의 조건식
;
;	조금 복잡하게 되었으므로 신설
;	어디까지나 이 앨리스의 말만의 조건식
;
;	인수 0	：캐릭터 ID 일단 넣어 앨리스 이외 머리카락과 구
;	인수 1	：랜덤 기본치
;	인수 2	：혐의 반응을 일으키는 최소의 물리량
;	반환값	：진위
;*********************************************************************************
@K17_CHECK_시간정지들킴(iID=K17C_ID, iRand_Base=20, iDoubt_Base=0)
#FUNCTION
#DIM iID
#DIM iRand_Base
#DIM iDoubt_Base

;캐릭터 ID체크
SIF iID != K17C_ID
	RETURNF 0
;벌써 들키고 있어
SIF CFLAG:iID:시간정지들킴 == 1
	RETURNF 0
SIF FLAG:역극 == K17C_사쿠야ID
	RETURNF 1
;준 것인가 본다
SIF CFLAG:iID:노팬티 == 2
	RETURNF 0
;혐의 50이상인가 본다
SIF CFLAG:iID:K17C_CF_혐의 < iDoubt_Base
	RETURNF 0
;앨리스의 팬티 있을까 본다
SIF !K17_CHECK_수송팬티(iID)
	RETURNF 0
;랜덤 통과
SIF !(K17_PERCENT(iRand_Base + CFLAG:iID:K17C_CF_혐의))
	RETURNF 0
	

RETURNF 1


;*********************************************************************************
;	MASTER의 시간정지들킴시의 텍스트
;
;	인수 0	：캐릭터 ID
;	반환값	：혐의0 로 1　혐의로 2
;*********************************************************************************
@K17_시간정지들킴(ARG=K17C_ID)
#DIM DYNAMIC iDown_호감도=0
#DIM DYNAMIC iDown_신뢰도=0
RESULT = 0
IF CFLAG:ARG:K17C_CF_혐의 == 0
	PRINTFORML 「후우…… 그렇게 대단한 능력을 가지고 있으면서, 이런 요정이나 할 법한 장난에 쓰다니」
	PRINTFORML 「알겠어?　%K17_CNAME()%이 하고 있는 건 그냥 재능 낭비야」
	PRINTFORML 「내가 아는 한 이런 대단한 능력 갖고 있는 사람은, %K17_CNAME(K17C_사쿠야ID)% 한 명 밖에 없어」
	PRINTFORMDW 지루하게……
	PRINTFORMDW …………지루하게
	PRINTFORMDW ………지루하게………지루하게
	PRINTFORMDW 지루하게 계속되는 설교에 %마스터는% 인생에 대해 조금 진지하게 생각했다……!
	RESULT = 1
ELSE
	;혐의중
	PRINTFORML 「……지금까지 내 몸에 장난 쳤던 거, 역시 %K17_CNAME()%이었구나……」
	SELECTCASE K17_GRT(ARG)
		CASE IS >= K17C_연모
			PRINTFORML 「후우…… 모르는 사람한테 장난 당하는 줄 알고, 불안했었어……」
			PRINTFORML 「%K17_CNAME()% 이외의 사람에게 만져지는 건 싫으니깐…… 바보……」
			PRINTFORMDL %타겟은% %CALLNAME:MASTER%의 품에 얼굴을 파묻고서 콩콩 때려댔다
			PRINTFORMDL %타겟은% 분노보다, 안심을 더 크게 느꼈던 것 같았다……
			PRINTW
			PRINTFORML 「아, 혼내지 않겠다는 건 아니니까, 기억해둬……」
			PRINTFORMDL 꼭 그렇지는 않았다
			CALL K17_MARK_반발각인()
		CASE IS >= K17C_사모밀회
			PRINTFORML 「……%K17_CNAME()%은 그냥 평범할…… 아니, 그냥 내가 사람 보는 눈이 없었네……」
			iDown_호감도 = CFLAG:ARG:호감도/6
			iDown_신뢰도 = CFLAG:ARG:신뢰도/6
			CALL K17_MARK_반발각인(1)
		CASE IS >= K17C_사모
			PRINTFORML 「……배신당한 기분이야…… 아니, 그냥 내가 멋대로 기대했던 거구나」
			PRINTFORML 「유감이야……」
			iDown_호감도 = CFLAG:ARG:호감도/4
			iDown_신뢰도 = CFLAG:ARG:신뢰도/4
			CALL K17_MARK_반발각인(2)
		CASEELSE
			PRINTFORML 「%K17_CNAME()%은 그런 사람이었구나……」
			PRINTFORML 「유감이야……」
			PRINTFORMDL %마스터는% %CALLNAME:TARGET%에게 완전히 미움받아 버린 것 같다……
			iDown_호감도 = CFLAG:ARG:호감도
			iDown_신뢰도 = CFLAG:ARG:신뢰도
			CALL K17_MARK_반발각인(3)
	ENDSELECT
	RESULT = 2
ENDIF

;호감도와 신뢰도의 변화
IF iDown_호감도 || iDown_신뢰도
	PRINTL
	PRINTFORMDL 호감도-{iDown_호감도}
	PRINTFORMDL 신뢰도-{iDown_신뢰도}
ENDIF
CFLAG:ARG:호감도-=iDown_호감도
CFLAG:ARG:신뢰도-=iDown_신뢰도
;정지 들킴
CFLAG:ARG:시간정지들킴 = 1
;혐의가 있어, 무자각 처녀상실하고 있으면 자각
SIF TALENT:ARG:처녀  == -1 && CFLAG:ARG:K17C_CF_혐의
	TALENT:ARG:처녀 = 0

RETURN RESULT

;*********************************************************************************
;	난교가 개시되었을 때의 이벤트
;	앨리스로부터 난교 상대에 대한 반응
;	정사 발각이라든지 함께 덮치기, 밀어 넘어뜨려지고등의 반응은 각처에서 한다
;	그 후 이것을 붙이는 느낌
;
;	인수 0	：난교 상대의 ID
;*********************************************************************************
@K17_난교개시(ARG)

SELECTCASE ARG
	;거리낌 없는 계
	CASE K17C_레이무ID, K17C_마리사ID, K17C_파츄리ID, K17C_유카ID, K17C_사쿠야ID, K17C_메디슨ID
		;앨리스가 연인경우
		IF TALENT:TARGET:연인
			PRINTFORML 「……그래서, 뭐야? %K17_CNAME(ARG)% %K17_RS("수줍은 거야?/부끄러운 거야?/얼굴 빨개졌어")%」
			PRINTFORML 「자아 %K17_CNAME(ARG)%, %K17_RS("이리 와서/이쪽으로 와서")%, 함께 %K17_RS("사랑해 보죠/쥐어짜내 보죠")%」
			PRINTFORML 「아, 그래도 일단은, 내 거니까」
			PRINTFORMDL 뭔가 대단한 일이 되어 버렸다……
		;상대가 연인인가 보는 아와와와……
		ELSEIF TALENT:ARG:연인
			PRINTFORML 「저기, 진짜 같이 해도 괜찮아?　%K17_CNAME(ARG)%……그럼 좋지만…… 사양하지 않을거니까」
			PRINTFORMDL 그렇게 말했지만 %타겟은% 조금 조심스러워 하는 모습이었다
		ELSE
			PRINTFORML 「자아 %K17_CNAME(ARG)%, %K17_RS("이리 와서/이쪽으로 와서")% 함께 %K17_RS("사랑해 보죠/쥐어짜내 보죠")%」
			PRINTFORMDL 뭔가 대단한 일이 되어 버렸다……
		ENDIF
	;존경계
	CASE K17C_미마ID, K17C_루이즈ID, K17C_신키ID, K17C_유메코ID
		
		;앨리스가 연인경우
		IF TALENT:TARGET:연인
			PRINTFORML 「%K17_CNAME(ARG)%가 진심으로 나와 버리면, 나로서는 이길 수가 없어」
			PRINTFORMDL %CALLNAME:MASTER%과 동행하던 %타겟은%, 조용히 중얼거렸다
			PRINTFORML 「%K17_CNAME(ARG)%……일단 말해두지만, 내 연인이라구」
		;상대가 연인인가 보는 후아아아아 원……
		ELSEIF TALENT:ARG:연인
			PRINTFORMDL %타겟은% 당황한 모습으로 앉은 자세를 고쳐잡았다
			PRINTFORML 「……%K17_CNAME(ARG)%, 함께 해도 괜찮을까요?」
			PRINTFORMDL %타겟은% 평소와는 다르게 매우 공손한 모습이었다
		ELSE
			PRINTFORML 「%K17_CNAME(ARG)%……저기, 함께 해도 괜찮을까요」
			PRINTFORMDL %타겟은% 평소와는 다르게 공손한 모습이었다
		ENDIF
		PRINTW
		PRINTFORML 「이상한 얼굴 하고 있어 %K17_CNAME()%…… 바보, %K17_CNAME(ARG)%의 가슴만 쳐다보고 있잖아……」
		PRINTFORML (지금 분명히, 눈으로 가슴 비교한 거지? ……정말)
	;모르는 사람
	CASEELSE
		;앨리스가 연인경우
		IF TALENT:TARGET:연인
			PRINTFORML 「……저기 일단은 말해주는 건데, 이거 내 거니까?」
			PRINTFORML 「아, 미안, 사과 안 해도 돼, 이 사람, 원래 이런 사람이니깐」
			PRINTFORML 「저기, %K17_CNAME(ARG)%? 라고 불러도 괜찮을까……」
			PRINTFORML 「……정말이지, 이렇게 좋은 아가씨를 대체 어디서 데려온 거야?」
			PRINTFORMDL %타겟은% %CALLNAME:(ARG)%를 꼭 껴안았다
		;상대가 연인
		ELSEIF TALENT:ARG:연인
			PRINTFORML 「잠깐……그 여자애가, %CALLNAME:MASTER%이 진심으로 사랑하고 있는 애지?」
			PRINTFORMDL %타겟이% %CALLNAME:MASTER%에게 귓속말을 해왔다
			PRINTFORML 「저기, %K17_CNAME(ARG)%? 라고 불러도 괜찮을까……」
			PRINTFORML 「알았어, 그럼 잘 부탁해……」
			PRINTFORMDL 그렇게 말했지만 %타겟은% 조금 조심스러워 하는 모습이었다
		;서로 연인이 아닌 경우
		ELSE
			PRINTFORML 「저기, %K17_CNAME(ARG)%? 라고 불러도 괜찮을까……」
			PRINTFORML 「우리 서로 마음이 통하는 걸까……?」
			PRINTFORML 「후훗, 왜냐면 우리 둘 다 같은 사람을 좋아하고 있잖아?」
		ENDIF
ENDSELECT
RETURN 1

;*********************************************************************************
;	덮치기허덕여타입선택
;
;	최저 조건은 RT의 연인
;	밀어 넘어뜨려지고 경험이 끝난 상태
;	덮치기으로 통상 이외의 허덕여타입을 경험이 끝난 상태
;*********************************************************************************
@K17_덮치기허덕여타입선택

IF FIRSTTIME("덮치기허덕여타입선택")
	PRINTFORML 「아, 미안. 조금 기다려……그……」
	PRINTFORML 「언제나 사랑 받고 있어서, 기쁘긴 하지만…… %K17_CNAME()%이 나에게 질려 버릴까봐 조금 걱정이야……」
	PRINTFORML 「%K17_CNAME()%이 하고 싶은 짓, 사양하지 말고, 마음대로 해도…… 괜찮아」
	
ELSE
	PRINTFORML 「그러니까, 오늘은 뭘 하고 싶은 거……야?」
ENDIF
PRINTL
{
CALL K17_ASK_M
	("언제나처럼 평범하게……", 1,
	@"%CALLNAME:TARGET%가 내 성욕을 받아줬으면 좋겠다……", CFLAG:K17C_CF_접수_도움계,
	@"%타겟과% 무리하게 엣찌 놀이 하고 싶다……", CFLAG:K17C_CF_접수_합의덮쳐계,
	@"싫어하는 %타겟을% 억지로 범하고 싶다……", CFLAG:K17C_CF_접수_억지로계,
	@"오히려 내 쪽에서 덮쳐지고 싶다……", 1)
}

SELECTCASE RESULT
	CASE 0
		CALL K17_SET_AUTO_PVOICE(, , K17C_접수_애원계)
		PRINTFORML 「항상 하던 것처럼, 그게 좋은 거구나……후훗」
		PRINTFORMDL %타겟은% 약간 붉어진 얼굴로 미소를 머금었다
		PRINTFORMDL 그러더니 스윽하고 다가와선 %CALLNAME:MASTER%의 귓가에 대고 속삭였다
		PRINTFORML 「나도 %K17_CNAME()%이랑 하는 %K17_RS("러브러브/달달한")% 엣찌, 좋아해 %K17_HEART()%」
		PRINTW
	CASE 1
		CALL K17_SET_AUTO_PVOICE(, , K17C_접수_도움계)
		PRINTFORML 「나를 %K17_RS("인형처럼/")%……%K17_RS("멋대로 가지고 놀고 싶구나/성욕 처리 하듯이 사용하고 싶구나")%……」
		PRINTFORMDL %CALLNAME:MASTER%의 선택을 들은 %타겟은% 망설이듯이 허벅지를 움찔거리고 있었다
		PRINTFORML 「괜찮아, 와줘……」
		PRINTW
	CASE 2
		CALL K17_SET_AUTO_PVOICE(, , K17C_접수_합의덮쳐계)
		PRINTFORML 「잠깐 괜찮아? 이건 단순한 연극 놀이야?　진심으로 이런 짓 다른 여자애들한테 하면 안 되니까……」
		PRINTFORMDL %마스터가% 살짝 건들자마자, %타겟은% 평소엔 상상조차 하기 힘들 정도로 연약해진 모습이 되어 버렸다
		PRINTFORML 「시럿 %K17_HEART()%　난폭하게는 하지 말아줘……」
		PRINTFORMDL %마스터는% 조금 죄악감을 느껴서 당황했지만, %타겟은% 귓가에 얼굴을 대고 상냥히 속삭였다
		PRINTW
		PRINTFORML 「%K17_RS("멀쩡해/괜찮아")%, 그냥 연기야……%K17_RS("엉망진창으로 /난폭하게 /범")%해줘 %K17_HEART()%」
		PRINTW
	CASE 3
		CALL K17_SET_AUTO_PVOICE(, , K17C_접수_억지로계)
		PRINTFORML 「싫엇……!　장난치지마!　%K17_CNAME()% 최악이야!」
		PRINTFORMDL 갑자기 거부 당해서 %마스터는% 반사적으로 %CALLNAME:TARGET%로부터 떨어졌다
		PRINTFORMDL 그런 %마스터를% 본 %타겟은% 귓가에 얼굴을 대고 살며시 속삭였다
		PRINTW
		PRINTFORML 「연기니깐 괜찮아…… 범해줘%K17_HEART()%」
		PRINTW
	CASE 4
		CFLAG:우후후 = 2
{
		CALL K17_CHOICE(
			"헤에……어떤 식으로 당하고 싶은 건데? ",
			@"%타겟이% 좋아하는 식으로……",
			@"%CALLNAME:TARGET%에게 쥐어 짜내지듯이……",
			@"%CALLNAME:TARGET%에게 덮쳐지고 싶다……",
			@"%CALLNAME:TARGET%에게 벌 받고 싶다……")
}
		;타입 결정하고 나서 부르면 된다
		SELECTCASE RESULT
			CASE 0
				CFLAG:K17C_ID:K17C_CF_허덕여타입 = K17C_공격_도움계
			CASE 1
				CFLAG:K17C_ID:K17C_CF_허덕여타입 = K17C_공격_애원계
			CASE 2
				CFLAG:K17C_ID:K17C_CF_허덕여타입 = K17C_공격_합의덮쳐계
			CASE 3
				CFLAG:K17C_ID:K17C_CF_허덕여타입 = K17C_공격_억지로계
		ENDSELECT
		
		CALL M_KOJO_EVENT_K17_10(1,0)
ENDSELECT
RETURN 1


;*********************************************************************************
;	처녀상실시의 이벤트
;	아-안 돼다, 억지로의 프라이오리티 잘못되어있는, 지문 고치지 않으면
;
;	인수 0	：캐릭터 ID
;	반환값	：성공 여부 판정
;*********************************************************************************
@K17_처녀상실(ARG=K17C_ID)
;비처녀라면 되돌린다
SIF TCVAR:ARG:파과 == 0 || FLAG:시간정지
	RETURN 0

;-------------------------------------------------
;무자각 처녀상실의 체크
;합의 때 마셔
;-------------------------------------------------
IF TCVAR:ARG:파과 == -1 && !FLAG:시간정지 && !TCVAR:ARG:만취 && !CFLAG:MASTER:장난
	;PRINTFORMW %CALLNAME:ARG%는 고통인것 같은 고통을 느끼지 않았던 것으로 곤혹하고 있다…
	PRINTFORML (아……어라, 생각했던 것보다 잘…… 들어 가네……? )
	IF K17_GRT(ARG) >= K17C_사모 && TCVAR:ARG:억지로 != 1 && CFLAG:K17C_ID:K17C_CF_허덕여타입 != K17C_접수_합의덮쳐계 && CFLAG:K17C_ID:K17C_CF_허덕여타입 != K17C_접수_억지로계
		PRINTFORML 「%K17_AP_NUM(2)%……저, 저기 있잖아……나, 처음이었는데……」
		PRINTFORML 「그런데도, 아프지 않았어…… 그렇다는건…… 그, 우리 궁합이 상당히 잘 맞는 걸까?　%K17_AP_NUM(2,1)%」
	ENDIF
	PRINTFORMDL 처녀를 잃은지 오래인데, %타겟은% 아직도 처녀라고 믿고 있던 것 같다……
	RETURN 1
ENDIF


;관계 성별로 지문이 바뀌므로 대응
IF TCVAR:ARG:만취
	;PRINTFORMW %CALLNAME:ARG%는 혼탁 한 의식 중(안)에서 처녀를 빼앗겨 버렸다……
	PRINTFORML 「아팟…… 머야아?　거기가 아파아……」
	PRINTFORMDL 제정신을 잃은 %타겟은% 자신이 뭘 당한 건지 아직도 잘 모르는 것 같다
;수면간 좋은 아이는 자고 있는 동안에 마마로 해 버리자∼
ELSEIF CFLAG:ARG:수면
	;PRINTFORMW %CALLNAME:ARG%의 처음은 자고 있는 동안에 빼앗겨 버렸다……
	PRINTFORML 「……후냐앗! ……」
	PRINTFORMDL %CALLNAME:TARGET%의 몸이 순간 흠칫 놀란 듯이 반응했지만, 아직 잠든 채였다
ELSEIF TALENT:ARG:무지
	;PRINTFORMW 성 지식의 부족한 %CALLNAME:ARG%는 무엇을 하셨는지 모른채, 처녀상실의 아픔에 당황해 무서워하고 있다……
	;PRINTFORMW %마스터는% %CALLNAME:ARG%를 침착하게 했다
	PRINTFORML 「아팟……먼……가……가랑이 저릿저릿 해써어……」

ELSEIF TCVAR:ARG:억지로 == 1 || (CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_덮쳐 && !(CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_공격))
	;억지로 붙어 있는 or 덮쳐 계의 접수
	;PRINTFORMW 호의를 가지고 있던 상대에게 배신당한 %CALLNAME:ARG%는, 굵은 눈물을 흘리기 시작했다……
	;PRINTFORMW %CALLNAME:ARG%의 저항 허무하고, %CALLNAME:MASTER%에 처녀를 빼앗겨 버렸다……
	;묶거나 해도 여기 올 것
	PRINTFORML 「시럿 %K17_AP_DEC()%　넣지 마 %K17_AP_DEC()%, 나 처녀야 %K17_AP_DEC()% 시러어어엇 %K17_AP_DEC(1)%」
	PRINTFORML 「들어왔어……들어와 버렸어 ……%K17_AP_DEC(1)%」
	PRINTFORMDL 저항하는 %타겟을% 억누르고, 단숨에 %TINKO(PLAYER)%를 찔러 넣어서 억지로 %CALLNAME:TARGET%의 처녀를 빼앗았다
	PRINTFORML 「너무해……처음이었는데……최저%K17_AP_DEC(1)%」
	
;친애 또한 상대가 주인(현재 친애가 없기 때문에, 연인으로 대용 연모 일괄
ELSEIF TALENT:ARG:연모
	;연모＆연인
	;PRINTFORMW %CALLNAME:ARG%는 %마스터가% 처음의 상대인 일에 이 이상 없는 행복을 느끼고 있는 것 같다……
	;연모
	;PRINTFORMW %CALLNAME:ARG%는 %CALLNAME:MASTER%에 처녀를 바칠 수 있었던 일에 행복을 느끼고 있는 것 같다……
	IF !(CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_공격)
		;접수
		;졸라 계
		
		PRINTFORML 「너, 넣어 버리는 거네……그, 처음이니까…… 살살……해줘?」
		PRINTFORML 「앗……으긋…… 읏∼~~~~!」
		PRINTFORMDL %CALLNAME:MASTER%의 %TINKO(PLAYER)%가 마지막 저항을 뚫어내자, %타겟은% 이마에 땀이 맺힌 채로 미소 지었다
		PRINTW
		PRINTFORML 「괜찮아……아픈 것보다…… 훨씬 더 기뻐, 고마워 %K17_CNAME()%」
		PRINTFORML 「드디어 하나가 될 수 있어서……기뻐」
		PRINTFORMDL %타겟은% 아픔을 견디면서, 괜찮단 듯이 %CALLNAME:MASTER%에게 미소 지었다……
	ELSE
		;공격
		PRINTFORML 「버, 범해버릴 거니까…………!」
		PRINTFORML (나 아직 처음인데……이런 걸 스스로 해버려야 된다……니 )
	ENDIF
	
ELSEIF TALENT:ARG:사모
	;PRINTFORMW 호의를 가지고 있었다고는 해도, %CALLNAME:ARG%는 %CALLNAME:MASTER%에 정조까지도 용서(허락)해 끝냈던 것에 당혹해 하고 있다……
	PRINTFORML (아얏……이거……생각보다 더 아팟……!)
	PRINTFORML 「읏……우우……미안, 아파앗……」
	PRINTFORMDL %CALLNAME:TARGET%가 아픔을 견디기 힘들어 해서, 흥분이 단숨에 식어 버렸다
ELSE
	;PRINTFORMW %CALLNAME:ARG%는 흐르게 되는 대로 %CALLNAME:MASTER%에 처녀를 빼앗겨 버렸다……
	PRINTFORML 「넣어버리는 거구나………읏…!」
ENDIF
RETURN 1

;*********************************************************************************
;	우후후 종료 이벤트
;	주도권이 도중에 바뀌는 일도 있으므로
;	덮치기이 어느 쪽이었는지 관계없이 끝났을 때의 처리
;	합의 취득의 RTF 보존등도 여기서 일괄처리 한다
;
;	인수 0	：개시시의 주도권 아마도 난교로 TARGET가 되지 않을 때도 있으므로 난교시는 따로 돌려준다
;	인수 1	：개시시가 욕구불만도
;*********************************************************************************
@K17_우후후감상전(ARG, ARG:1)
#DIM DYNAMIC iRT	= 0		;EX로 취하는 (분)편
#DIM DYNAMIC iReview = 0	;평가
#DIM DYNAMIC iFriends = 0	;친구 보존
#DIM DYNAMIC iTNum = 0		;TARGET 인원수

iTNum = GET_TARGETNUM()
PRINTL

IF TCVAR:만취
	;만취시
	PRINTFORML 「뭔가……평소보다도 더 리얼했던 느낌이야……」
	PRINTFORML  (마치 진짜로……엣찌한 듯한……)
	PRINTFORMDL 제정신을 잃은 %타겟은% 꿈에서 일어난 일이라 착각하고 있는 것 같았다……
	RETURN 1
;ELSEIF TCVAR:만취간들킴
;	;만취간 들켜 어라-없어
;	PRINTFORML 「……어……어……어떤……어째서!」
ENDIF

;억지로 플래그 본다
CALL K17_억지로질내사정(TARGET)
SIF RESULT
	RETURN 1

;첫회 감상 퍼부어
IF !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_우후후) && CFLAG:TARGET:기정사실 & 합의_우후후
	
	;우후후 합의 첫회 한정
	SELECTCASE K17_GRT()
		CASE IS >= K17C_연모
			PRINTFORML 「저기 말야……그……」
			PRINTFORMDL %타겟이% 얼굴을 가까이 대고 %CALLNAME:MASTER%의 귓가에 살며시 속삭인다
			PRINTFORML 「이제부터 몇 번이고, 함께 하자……?」
			PRINTFORMDL 그렇게 말을 끝낸 %타겟은% %CALLNAME:MASTER%의 뺨에 키스하며 미소 지었다
			PRINTFORML (이제부터 좀 더……굉장한 걸, 당해버리는 걸까……)
		CASE IS >= K17C_사모
			PRINTFORML 「있잖아, 그―……%K17_CNAME()%, 이런 짓……또 하고 싶은거……야?」
			PRINTFORML 「그, 그래……알겠어……」
			PRINTFORMDL %타겟은% 그렇게 말을 끝낸 뒤 새빨개진 얼굴로 고개를 숙였다
			PRINTFORML (다음에는 좀 더 제대로 준비라던가, 꾸며 두지 않으면……)
		CASEELSE
			PRINTFORML 「응……벌써 끝이야……?」
			PRINTFORML (뭔가, 생각했던 것보단 별 거 없네……)
	ENDSELECT
	
ELSE
	iRT = K17_GRT_EX(TARGET)
	IF (!(CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_공격) && !(CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_덮쳐)) || CFLAG:K17C_ID:K17C_CF_허덕여타입 & K17C_허덕여F_공격
		;관계 성별 후 익살 앨리스는무슨 상냥한 듯한 생각이 든다(소망
		SELECTCASE K17_LOWER_LIMIT_RAND(iRT, K17C_사모, K17C_연모)
			CASE IS >= K17C_연모
				PRINTFORML 「응∼~츄%K17_HEART()%　만족……해써어?」
			CASE IS >= K17C_사모
				PRINTFORML 「응∼%K17_HEART()%　……그럼, 끝이네……」
			CASEELSE
				PRINTFORML 「응……끝이구나……」
		ENDSELECT
	ELSE
		;접수의 덮쳐 계
		SELECTCASE K17_LOWER_LIMIT_RAND(iRT, K17C_사모, K17C_연모)
			CASE IS >= K17C_연모
				PRINTFORML 「응……%K17_HEART()%　……범해져 버렸다 %K17_HEART()%　%K17_RS("변태/색골/바보")%」
			CASE IS >= K17C_사모
				PRINTFORML 「정말, 잔뜩 흥분해서는……%K17_RS("이런 게 좋은 거야? /버릇 들면 어떡할 거야")% %K17_RS("변태/색골/바보")%」
			CASEELSE
				PRINTFORML 「싫다고 말했는데……정말」
		ENDSELECT
	ENDIF
ENDIF
;----------------
;후 처리
;----------------
;질내사정의 카운터
IF TCVAR:K17C_ID:K17C_TC_질내사정카운트
	PRINTW
	PRINTFORML 「%K17_SPLIT_SHUFFLE(@"%K17_RS("하앗/냐앙/히읏/꺅") %%K17_BLUSH()%\\……","\\")%」
	PRINTFORML (안에 쌌던 게……흘러나와 버렸어……)
	SIF TCVAR:K17C_ID:K17C_TC_질내사정카운트 > 1 && !CFLAG:임신자각상태
		PRINTFORML ({TCVAR:K17C_ID:K17C_TC_질내사정카운트}번이나 %K17_RS("안에 싸댔/질내사정 당했/교배 되었")%으니깐……)
	;해금 상태 셀렉트
	SELECTCASE RAND(0, (CFLAG:K17C_ID:생해금)+1)
		CASE 0
			PRINTFORML (역시……%K17_RS("안에다 싸는/생으로 하는/질내사정 하는")% 편이 기분 좋은 걸까나?)
		CASE 1
			PRINTFORML (%K17_RS("수정시키고 싶은/임신시키고 싶은/아기 만들고 싶은")% 걸까나?)
		CASE 2
			PRINTFORML (%K17_RS(@"수정……%K17_RS("한 걸까나/하고 있을까나")%/ 아기……%K17_RS("생기게 되는 걸까나/만들어 지는 걸까나")%")%? )
	ENDSELECT
ENDIF
;복장 체크
IF EQUIP:0
	;몹시 서툼이다-영화등으로 잘 걷자 말하는 묘사가 좋을 것이지만
	PRINTFORMDL %타겟은% 아직 달아올라 있는 상태였지만 %CALLNAME:MASTER%에게 등 돌리고선, 흐트러진 머리를 가다듬고 허겁지겁 옷매무새를 바로 잡았다……
ENDIF

RESULT = 0
;첫회 플래그 보존했을 때도 되돌린다
SIF CFLAG:TARGET:기정사실 & 합의_우후후
	TRYCALL K17_RELATION_EV( K17C_RTF_우후후 )
;연모 미만 감상 퍼부어
SIF iRT < K17C_연모 || RESULT || TFLAG:껴안기모드
	RETURN 1
PRINTW

;----------------
;난교시의 대응
;첫회는 있을 수 없을 것
;----------------
IF  iTNum > 1
	;우선 친구 우선으로 취한다
	iFriends = K17_GET_TARGETS_ID()
	PRINTFORML 「%K17_CNAME(iFriends)%도, 수고 하셨습니다……」
	
	;아는 사람 반응
	SIF K17_GET_FRIENDS(iFriends)
		PRINTFORML (%K17_CNAME(iFriends)%의 앞에서 \@ARG==-1 ? 당하는 거#하는 거\@는……역시 조금 %K17_RS("부끄러운/창피한/긴장하게 되는")% 걸)
	RETURN 1
ENDIF


;----------------
;감상전
;----------------
IF ARG == -1 || TALENT:MASTER:성별 == 1
	;앨리스를 덮치기시의 평가
	;MASTER가 장대 없음의 여성의 경우도 여기
	;----------------
	;평가 계산
	;----------------
	;개시시가 욕구불만도으로부터, 어떤 것정도의 비율 줄어들었는지 취득
	iReview =   K17_ROUND( LIMIT(CFLAG:TARGET:욕구불만도, 0,1000)*100 , LIMIT(ARG:1, 0,1000))
	iReview = 100-iReview
	SELECTCASE iReview
		;만족
		CASE IS >= 70
			PRINTDATAL
				DATAFORM (응……깨끗하게……했다%K17_HEART()%)
				DATAFORM (능숙……하게 해버렸어%K17_HEART()%)
				DATAFORM (아%K17_HEART()%　만족……)
			ENDDATA
			PRINTFORML 「%K17_RS("저기/")%……엄청 %K17_RS("좋았어/기분 좋았어/만족 했")%어……」
			PRINTDATADL
				DATAFORM %CALLNAME:MASTER%에게 만족스러운 미소를 향하는 %타겟은% 조금 요염하게 보였다
				DATAFORM %타겟은% 조금 부끄러운 듯이 숙인 채로, %CALLNAME:MASTER%의 손에 손가락을 걸고 있었다
				DATAFORM %타겟은% 만족스럽게 웃으며, %CALLNAME:MASTER%에게 다가붙어선 어리광 부리고 있었다
			ENDDATA
		;조금 더
		CASE IS >= 45
			PRINTDATAL
				DATAFORM (……조금만 더……핫, %K17_RS("이럼 안 되는데/천박해") %%K17_BLUSH()%)
				DATAFORM (으응~……%K17_RS("정말/이제") %%K17_RS("조금만/조금만/한 번만")%, 더 해줘도 좋았을 텐데……어쩔 수 없네)
				DATAFORM (%K17_RS("아직 부족하다고 느끼게/조금만 더 해주길 바라게/앞으로 조금만 더 해주길 바라게")% 되는 건…… 역시 엣찌하게 되어버린 걸까……)
			ENDDATA
			PRINTFORMDL %타겟은% 아직 조금 멍한 상태로, 얼굴%K17_RS("을 붉히고/을 붉게 물들이고/이 새빨개지고")% 있었다
		;불만
		CASEELSE
			PRINTDATAL
				DATAFORM (……이거……%K17_RS("애태우려는 거야/참고 있는 거야")%……? )
				DATAFORM (벌써 끝이라니……%K17_RS("무슨 일일까……? /지친 거야……? /나에게 질린 거야……? /내가 좀 더 매력 있었다면……")%)
				DATAFORM (뭐야……조금만 더 %K17_RS("놀아/해")%줘도…… 괜찮잖아)
			ENDDATA
			PRINTFORMDL %타겟은% 조금 불만인 듯이 %K17_RS(@"뺨을 부풀리고 있었다/%마스터를% 올려다보고 있었다/허벅지를 비비고 있었다")%
	ENDSELECT
ELSEIF ARG == K17C_ID
	;장대 있어 MASTER로 앨리스가 덮치기시
	;----------------
	;평가 계산
	;----------------
	;개시시의 정력으로부터, 어떤 것정도의 비율 줄어들었는지 취득
	iReview =   K17_ROUND( LIMIT(BASE:MASTER:정력, 0, MAXBASE:MASTER:정력)*100 , LIMIT(ARG:1, 0, MAXBASE:MASTER:정력))
	iReview = 100-iReview
	
	SELECTCASE iReview
		;만족
		CASE IS >= 60
			PRINTDATAL
				DATAFORM (너무 해버린……걸까 %K17_HEART()%)
				DATAFORM (대만족인 거 같네……%K17_HEART()%)
				DATAFORM (상쾌해졌단 얼굴 하고선…… 귀여워 %K17_HEART()%)
			ENDDATA
			PRINTFORML 「어땠%K17_RS("어/을까나")%?　후훗……」
			PRINTFORMDL %K17_RS("자랑스러운 듯한/만족한 듯한/요염하게 미소 짓는")% %CALLNAME:TARGET%에게 모조리 쥐어 짜내진 %마스터는% 한동안 멍하니 있었다
		
		;조금 더
		CASE IS >= 30
			PRINTDATAL
				DATAFORM (당하는 쪽이 되는 건……%K17_RS("부끄러운/무서운/싫은")% 걸까나……)
				DATAFORM (좀 더 하고 싶었는데……%K17_RS("부끄러운/무서운/싫은")% 걸까나……%K17_RS("하우/우으/으음")%)
				DATAFORM (으응~……조금 %K17_RS("만 더/더")%…… 어쩔 수 없네)
			ENDDATA
			PRINTFORMDL %마스터는% 조금 불안한 듯이 바라보는 %CALLNAME:TARGET%의 머리를 상냥하게 쓰다듬었다
			
		;불만
		CASEELSE
			PRINTDATAL
				DATAFORM (……이건……%K17_RS("잘 안 된 거야/싫은 거야/참고 있는 거야")%……? )
				DATAFORM (벌써 끝이라니……%K17_RS("왜 그래……? /지친 거야……? /나에게 질린 거야……? /내가 좀 더 매력 있었다면……")%)
				DATAFORM (뭐야……조금만 더 %K17_RS("교제해/해")%줘도…… 괜찮잖아)
			ENDDATA
			PRINTFORMDL %타겟은% 조금 불만인 듯이 %K17_RS(@"뺨을 부풀리고 있었다/%마스터를% 올려보다고 있었다/허벅지를 비비고 있었다")%
	ENDSELECT
ENDIF

RETURN 1

;*********************************************************************************
;	억지로 질내사정했을 경우의 분노→우후후 해제
;	또 보통으로 우후후 종료할 수 있던 패턴에 대응
;
;	질내사정카운트와 억지로 플래그를 초기화해 되돌린다
;
;	인수 0	：캐릭터 ID　약어 앨리스
;	반환값	：억지로 플래그를 봐 표시하면(자) 1　표시하지 않았으면 0
;*********************************************************************************
@K17_억지로질내사정(iID=K17C_ID)
#DIM iID

SIF !TCVAR:iID:억지로
	RETURN 0

PRINTFORML 「%K17_RS("안 된/싫어/그만 두라고")%다고 말했는데…… %K17_RS("최저/배신자/너무해")%……」

;질내사정
IF TCVAR:K17C_ID:K17C_TC_질내사정카운트
	;위험일 본다
	IF ESTRUS_CYCLE(iID) >= 7
		PRINTFORML (어쩌지, 어쩌지!　……오늘은 %K17_RS("아기 생길수도 있는데/임신해버릴 수도 있는데")%……)
	ELSE
		PRINTFORML (……오늘이 %K17_RS("아기/임신")% 걱정 안 해도 괜찮은 날이었던가……? )
	ENDIF
ENDIF

PRINTFORMDL 초조한 모습의 %CALLNAME:iID%는 몹시 우울해 보였다……

;TCVAR:iID:억지로 = 0
TCVAR:K17C_ID:K17C_TC_질내사정카운트 = 0
RETURN 1


;*********************************************************************************
;	관계성을 평가한다
;
;	09/08	이것저것무슨 머리 약하게 첫회 한정을 어떻게 할까 나중에 생각한다
;	09/09	어떻게든 깨끗이 실제상타이밍에 차이가 있으므로 부를 때 첫회 판정
;	09/10	결국 CFLAG 사용하는 것에 동적 판정으로 플래그 서도 여기에 왔을 때에 첫회 판정할 수 있을 것
;			플래그 올리고 나서 불러 줘
;	11/24	플래그치의 가산을 or연산에 동적과 글로벌하게 차이가 있는 경우 UPDATE 하는 것에
;
;	인수 0	：취득 플래그(K17C_RTF_
;	인수 1	：캐릭터 ID 생략으로 앨리스
;	반환값	：고쳐 쓰면(자) 1　글로벌하게 이미 추가되고 있으면(자) 0
;*********************************************************************************
@K17_RELATION_EV(ARG:0, ARG:1=K17C_ID)
#DIM iRTnum
#DIM iRTF

iRTF = K17_RT_FG(K17C_ID)

SIF CFLAG:K17C_ID:K17C_CF_RTF & ARG:0
	RETURN 0

iRTnum = FINDELEMENT (K17C_RTF, ARG:0)
SIF iRTnum == -1
	THROW 인수({ARG:0}) 부정한 플래그를 취득

;취득 플래그 보존
CFLAG:K17C_ID:K17C_CF_RTF |= K17C_RTF:iRTnum

;UPTATE
SIF iRTF != CFLAG:K17C_ID:K17C_CF_RTF
	CFLAG:K17C_ID:K17C_CF_RTF = iRTF

CALL K17_RELATION_ANNOUNCE(iRTnum)


;힌트 표시 우선 지금으로서 매회 표시
SIF RESULT == 1 ;&& CFLAG:K17C_ID:K17C_CF_샹하이이벤트 >= 1
	CALL K17_HINT(iRTnum)
PRINTW
RETURN 1


;*********************************************************************************
;	취득한 플래그와 현재의 관계성을 비교해 공지 한다
;
;	손질 안건
;	09/16	아마 이것으로 k
;	10/07	최고치의 설정을 추가
;
;	인수 0	：취득 플래그 넘버
;	인수 1	：캐릭터 ID 생략으로 앨리스
;	반환값	：읽을 수 있으면(자) 1
;*********************************************************************************
@K17_RELATION_ANNOUNCE(ARG:0, ARG:1=K17C_ID)
#DIM iRTnum

iRTnum=K17_GRT(ARG:1)

	PRINTL

	;최고치를 얻었다
	IF CFLAG:K17C_ID:K17C_CF_RTF >= K17C_RTM_연인
		PRINTFORMDL %CALLNAME:(ARG:1)%와의 관계가 깊어졌다
		PRINTFORMDL 지금 현재 %CALLNAME:(ARG:1)%과 최고의 관계를 유지하고 있다
		RETURN 0
	ENDIF

	IF ARG <= iRTnum
		;현재의 관계성과 얻을 수 있던 플래그와 RT가 합치인가 아래인가
		IF ARG:0 <= (K17C_RT_MAX/2)
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 순조롭게 진행되고 있는 생각이 든다……!
		ELSE
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 순조롭게 깊어지고 있는 생각이 든다……!
		ENDIF
		RETURN 1
		
	ELSEIF ARG == iRTnum+1
		;현재의 관계성보다 얻은 플래그가 1개상에서 오르지 않는다(무엇인가 잊고
		IF ARG <= (K17C_RT_MAX/2)
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 진행되지 않았다
			PRINTFORMDL 뭔가 중요한 것을 잊고 있다……
		ELSE
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 깊어지지 않았다
			PRINTFORMDL 뭔가 중요한 것을 간과하고 있다……
		ENDIF
		RETURN 1
		
	ELSEIF ARG > iRTnum+1
		;1이상상 (너무 날리고
		IF ARG <= (K17C_RT_MAX/2)
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 진행되었을지도 모른다……
			;PRINTFORMDL 처를 너무 서두른 것 같다……
		ELSE
			PRINTFORMDL %CALLNAME:(ARG:1)%과의 관계는 깊어졌을지도 모른다……
			;PRINTFORMDL 처를 너무 서두른 것 같다……
		ENDIF
		RETURN 1
	ENDIF
	
	
	
RETURN 0

;*********************************************************************************
;	히에에엥과 표시
;
;	만일을 생각해 글로벌에서도 부를 수 있도록(듯이)
;	현재의 RELATION_TYPE에 대해서 부족한 플래그에 대해서 공지 한다
;	CSTR에 처넣어 능력표시→캐릭터 소개라도 표시하고 싶지만 설계적으로 무리인가
;
;	10/07	최고치의 조건식을 추가
;	11/24	머지 정지　UPDATE전 상태의 예외 처리를 추가
;
;	인수 0	：취득 플래그 넘버 생략으로 현재의 관계성의 다음 단계를 표시
;*********************************************************************************
@K17_HINT(ARG=0)
#DIMS cHINT, K17C_RT_MAX
#DIM iRTnum 	= 0
#DIM iRT_Flag	= 0
VARSET LOCALS

;--------------------
;초기화
;--------------------
iRT_Flag	= K17_RT_FG()
iRTnum		= K17_GRT()

;--------------------
;보존과 차이를 본다
;--------------------
SIF iRT_Flag != CFLAG:K17C_ID:K17C_CF_RTF
	CFLAG:K17C_ID:K17C_CF_RTF = iRT_Flag

;--------------------
;히에에엥과 문장의 초기화
;--------------------
VARSET cHINT
FOR p, 1, K17C_RT_MAX

;	;취득 플래그의 표시 초기화
;	IF iRT_Flag & K17C_RTF:p
;		LOCALS += UNICODE(0x2665)
;	ELSE
;		LOCALS += UNICODE(0x2661)
;	ENDIF

	SELECTCASE p
		
		CASE K17C_친구
			IF ABL:K17C_ID:친밀 >= 5
				cHINT:p += CALLNAME:K17C_ID+"는 조금 대화를 하고 싶은 것 같다……"
			ELSE
				cHINT:p += "아직"+CALLNAME:K17C_ID+"에게 친구로서 인정받지 못한 것 같다……"
			ENDIF
		CASE K17C_사모
			IF (ABL:17:욕망 - ABL:K17C_ID:친밀) >= 1
				;섹프 루트
				cHINT:p += "아직"+CALLNAME:K17C_ID+"의 몸의 개발이 끝나지 않았다……"
			ELSE
				;순애 루트
				cHINT:p += "아직"+CALLNAME:K17C_ID+"에게 연정이 싹트지 않았다……"
			ENDIF
			
		CASE K17C_사모키스
			cHINT:p += "아직"+CALLNAME:K17C_ID+"와 키스조차 하지 않았다……"
			
		CASE K17C_사모밀회
			cHINT:p += CALLNAME:K17C_ID+"는 데이트 하면서 제대로 대화해보고 싶어 하는 것 같다……"
			
		CASE K17C_사모우후후
			cHINT:p += "아직"+CALLNAME:K17C_ID+"와 성교의 합의를 얻지 않았다……"
			
		CASE K17C_연모
			IF (ABL:17:욕망 - ABL:K17C_ID:친밀) >= 2 && ABL:K17C_ID:욕망 <= 10
				cHINT:p += CALLNAME:K17C_ID+"는 좀 더 몸을 섞고 싶은 것 같다……"
			ELSE
				cHINT:p += "아직"+CALLNAME:K17C_ID+"와의 사이에 사랑이 태어나지 않았다……"
			ENDIF
			
		CASE K17C_연모고백
			cHINT:p += "아직"+CALLNAME:K17C_ID+"의 사랑 고백을 듣지 못 했다……"
			
		CASE K17C_연모생해금
			cHINT:p += "아직"+CALLNAME:K17C_ID+"와 아이 만들기 합의를 얻지 않았다……"
			
		CASE K17C_버릇
			cHINT:p += CALLNAME:K17C_ID+"에게는 아직 비밀이 있는 것 같다……"
			
		CASE K17C_연인
			IF TALENT:MASTER:연인!=0 && TALENT:MASTER:연인!=K17C_ID
				cHINT:p += CALLNAME:K17C_ID+"의 몸에 좀 더 쾌락을 철저히 가르치는 편이 좋은 것 같다……"
			ELSE
				cHINT:p += CALLNAME:K17C_ID+"는"+CALLNAME:MASTER+"의 연인이 되고 싶은 것 같다……"
			ENDIF
			
		CASE IS >= K17C_RT_MAX
			cHINT:p += "지금 현재"+CALLNAME:K17C_ID+"와 최고의 관계를 유지하고 있다"
		CASEELSE
			cHINT:p += "「……혹시, 나에게 이상한 짓 한 건 아니지?」\n"
			cHINT:p += "「가르쳐 주면 고마울 텐데……」"
	ENDSELECT
NEXT



;PRINTFORMDL 현재의 %CALLNAME:K17C_ID%과의 관계성 수치　{iRTnum}/10　현재의 관계：{K17_GET_RELATION_NAME(iRTnum)}
;PRINTFORMD 취득 플래그　
;SETCOLOR C_PINK
;SETFONT "Times New Roman"
;PRINTFORML %LOCALS%
;SETFONT



;--------------------
;최고치를 얻고 있다
;--------------------
IF CFLAG:K17C_ID:K17C_CF_RTF == K17C_RTM_연인 || iRT_Flag == K17C_RTM_연인
	PRINTFORMDL 지금 현재%CALLNAME:K17C_ID%과는 최고의 관계를 유지하고 있다
	RETURN 0
ENDIF

;SIF CFLAG:K17C_ID:K17C_CF_RTF > K17C_RTM_연인
;	THROW CFLAG:K17C_ID:K17C_CF_RTF({CFLAG:K17C_ID:K17C_CF_RTF}) 부정한 플래그치


;다음번까지를 표시 순조, 너무 날리고
IF ARG != iRTnum+1
	iRTnum += 1
	PRINTFORMDL 다음의 단계로 나아가려면 ……
	;CSTR:K17C_ID:5 = 다음의 단계로 나아가려면 ……
ENDIF


;SIF ARG > iRTnum
;	iRTnum =ARG
;PRINTFORML 「iRTnum{iRTnum}iRT_Flag{iRT_Flag}

;마스크를 봐 서지 않은 플래그의 힌트를 표시
FOR i, iRTnum, i<=-1,-1
	IF !(iRT_Flag & K17C_RTF:i)
		PRINTFORMDL %cHINT:i%
	ENDIF
NEXT

RETURN 1


;*********************************************************************************
;	아침 펠라 이벤트
;	아침에 일어 났을 때에 같은 장소에 있을 때
;
;	인수 0	：캐릭터 ID
;	비고	：판정에 사용하는 TCVAR 플래그가 필요
;*********************************************************************************
@K17_아침펠라이벤트(ARG=K17C_ID)

SIF TCVAR:ARG:K17C_TC_아침펠라
	RETURN 0
;우선 지금으로서 장대 소유만
SIF !(TALENT:MASTER:성별 >= 2)
	RETURN 0

TCVAR:K17C_ID:K17C_TC_아침펠라 = 1

;MASTER가 욕구불만도의 판정이라든지도 필요한가지금으로서 풍미
PRINTFORML 「자아, 오늘도 좋은 아침이네」
PRINTFORMDL 조금 전……
PRINTFORMDL ……
PRINTFORMDL …………
PRINTFORMDW ………………
PRINTFORML 「%K17_츄파음(K17C_접수_애원계, ABL:K17C_부위M_키스, 3) %%K17_SEXY_CONVERT("……아직, 안 일어났네")%」
PRINTFORML 「%K17_츄파음(K17C_접수_애원계, ABL:K17C_부위M_키스, 2) %%K17_SEXY_CONVERT(K17_CALL_G()+", 이렇게 커져선", 8)%」
PRINTFORML 「%K17_SEXY_CONVERT(K17_CALL_G(MASTER, 0,1)+", 해져선…")%%K17_츄파음(K17C_접수_애원계, ABL:K17C_부위M_키스, 2,1)%」
PRINTFORMDL 뭔가 간지럽다고 생각했더니, 시트를 뒤집어 쓴 %타겟이% %CALLNAME:MASTER%의 고간에 얼굴을 파묻고 있었다
PRINTFORML 「아앙, 안녕 %K17_BLUSH()%　응∼~쥬룻 %K17_HEART(2)%」
PRINTFORMDL 말할거면 적어도 얼굴 좀 떼놓고 말해주면 좋겠는데……
PRINTW
PRINTFORMDL 왜 그런 짓을 한 거야
PRINTFORML 「잠깐, 아침에 이렇게 일으켜 달라고 부탁한 건 %K17_CNAME()%이잖아」
PRINTFORMDL 그런 걸 말했었나, 완전히 잊고 있었다……
RETURN 1
;*********************************************************************************
;	욕실 이벤트
;	ONABARE같은 녀석 가볍게 만들어 본다
;	범용성에 대해 생각하는 것은 그만둔……조만간 지문과 말분리
;	저것 생각했던 것보다무슨 야한
;
;	인수 0	：캐릭터 ID
;	반환값	：알몸 보고 싶은거야? 의 대답
;			：1참아 보지 말아 실패
;			：2참아 보지 말아 성공
;			：3보고 싶다!			그리고 실패
;			：4보고 싶다!			그리고 성공
;			：0 원래 어느 쪽인가가 성적인 눈으로 보지 않았기 때문에 아무것도 없음 그것인가 벌써 오늘은 했다
;*********************************************************************************
@K17_욕실이벤트(ARG)
#DIM 시간필요치 = 0
#DIM iRand = 0
;이벤트는 일일일회
SIF TCVAR:K17C_ID:K17C_TC_욕실이벤트
	RETURN 0
TCVAR:K17C_ID:K17C_TC_욕실이벤트 = 1

IF HETEROSEX(MASTER, ARG)
	SIF TALENT:ARG:성별기호 == -1 || TALENT:MASTER:성별기호 == -1
		RETURN 0
ENDIF

PRINTL
PRINTFORML 「%K17_RS("꺄악/냐앙/히양")%!」
PRINTFORMDL 우당탕, 하는 소리와 함께 평소 %CALLNAME:ARG%의 모습에서는 상상조차 하기 힘든 얼빠진 목소리가 들렸다
PRINTFORML 「아팟……넘어져 버렸어……」
PRINTFORMDL 넘어졌을 때 엉덩이를 부딪혀서 그런지, 웅크린 채로 앉고 있었다
PRINTFORMDL %CALLNAME:MASTER%의 시점으론 하얗고 예쁜 등과 %HIP(ARG)%가 그대로 보이고 있었다
PRINTW
PRINTFORML 「아니, 괜찮으니까, 이 쪽으로 안 와도 되니까!　앞! 앞을 가리라구!」
PRINTFORMDL 그렇게 말해봤자 목욕탕이니 어쩔 수 없다
PRINTFORMDL %CALLNAME:ARG%는 손으로 국부를 필사적으로 가리고 있었다
PRINTFORMDL %마스터는% 그런 %CALLNAME:ARG%의 눈앞까지 다가가서, 손을 빌려 주려고 했다

PRINTFORML 「읏∼~~~!　%K17_BLUSH()%」
PRINTFORMDL 하지만, %CALLNAME:ARG%는 %마스터를% 보더니 얼굴이 새빨개진 채로 굳어 버렸다
PRINTW
;우후후 전
IF !(K17_RT_FG(ARG) & K17C_RTF_우후후)
	;MASTER장대 판정만
	IF TALENT:MASTER:성별 >= 2
		;앨리스에게는 없다
		SIF !(TALENT:ARG:성별 >= 2)
			PRINTFORML (뭐, 뭐뭐뭐뭐, 뭔가 달려있어!)
		
		;감상 등
		SELECTCASE TALENT:MASTER:형상
			;사랑스럽다
			CASE 1
				PRINTFORML (……생각했던 것보다 귀엽네……)
			;결점 조리
			CASE 2
				PRINTFORML (…………우와, 작아……)
			;빛난다!누구야 이것 생각한 녀석 웃어요 이런 응
			CASE 4
				PRINTFORML (뭔가 엄청 빛나고 있습니다만!)
			;돌기 부착
			CASE 5
				PRINTFORML (뭔가 엄청 울퉁불퉁 합니다만!)
			;크다!
			CASE 6
				PRINTFORML (잠깐……너무 크지 않아……?)
			;보통은 칭찬하고 녹고
			CASEELSE
				PRINTFORML (생각했던 것보다……뭔가……%K17_RS("엣찌/대단/에로")%해)
		ENDSELECT
	;장대 없음젖비교
	ELSE
		IF TALENT:MASTER:가슴사이즈 > TALENT:ARG:가슴사이즈
			PRINTFORML (가슴……나보다 커서……%K17_RS("출렁출렁 거려/포동포동 해/몰캉몰캉 해")%)
		ELSEIF TALENT:MASTER:가슴사이즈 < TALENT:ARG:가슴사이즈
			PRINTFORML (가슴……%K17_RS("몰캉거릴 거 같아서/작아서")% 귀여워)
		ELSE
			PRINTFORML (비슷한 크기지만……뭔가 %K17_RS("엣찌/대단/에로")%해……)
		ENDIF
	ENDIF
;우후후 후
ELSE
	PRINTFORML (변함없이……%K17_RS("멋진/좋은/대단한/요염한")% 몸이네……)
	;MASTER장대 판정만
	IF TALENT:MASTER:성별 >= 2
		PRINTFORML (%K17_CALL_G(MASTER, 0,1)%, 너무 과시하잖아……)
	ELSE
		PRINTFORML (무심코 %K17_CALL_P(K17C_부위B, 1, MASTER)%, 봐 버렸다)
	ENDIF
;우후후 판정 종단
ENDIF

PRINTFORMDL %CALLNAME:ARG%의 목이 꿀꺽……하고 울었다
PRINTW
PRINTFORML 「……핫!」
PRINTFORML 「이건 달라, 어, 어라……?　허리가……빠져, 서, 못 일어 나겠어……」
PRINTFORMDL %CALLNAME:ARG%는 바닥에 주저앉은 채로 움직이질 못 하고 있었다
PRINTFORMDL 벌거벗은 채로 국부를 못 보게끔 손으로 가리고 있었지만,
PRINTFORMDL 평상시엔 옷 위로부터는 좀처럼 안보이던 %THIGHS(ARG)%나
PRINTFORMDL 팔의 틈새로부터 흘러넘치는 %OPPAI_DESCRIPTION(ARG, 1)%에 무심코 시선이 가 버린다
PRINTFORML 「잠깐 너무 빤히 보잖아! 이럴 땐 시선을 피해주는 배려 정도는 좀 해줘……」
PRINTFORMDL 부끄러운 듯이 몸을 가리는 %CALLNAME:ARG%에게 손을 빌려줘서 일어서게 했다
PRINTW
PRINTFORML 「고마워……그러니까 너무 빤히 본다고……」
PRINTFORML (눈초리 엄청나……그렇게 %K17_RS("음란한 눈으로/잡아먹을 듯이/굶은 짐승같은 눈으로/번들거리는 눈으로")% 보면……안 보여주려 하는 내 쪽이 더 나쁜 것 같잖아……)


CALL K17_CHOICE("「그, 그렇게 보고 싶은거야……?」","그렇지 않으면"+\@ TALENT:MASTER:2 == 2 ?  신사 # 숙녀 \@+" ","차분히 보고 싶다")
;쵸로 좋은―
;간파해 좋습니까도 만들고 싶다

;ONABARE　"보아 줄 테니까 부디 그대로"　의 조건 코피페 조금 개변요점 조정
시간필요치 = 껴안고필요치(ARG) - 30 + TALENT:ARG:수치심 * 50 - ABL:ARG:노출벽 * 50 - CFLAG:ARG:욕구불만도 / 20
SIF  TALENT:ARG:자존심 > 0
	시간필요치 += 100
SIF CFLAG:ARG:기정사실 & 합의_우후후
	시간필요치 -= 50
SIF TALENT:ARG:담력 < 0
	시간필요치 -= 200

;-----------------------------
;그렇지 않고 실패
;-----------------------------
IF RESULT == 0 && CFLAG:ARG:합의판정 <= 시간필요치
	
	PRINTFORML 「도와줬던 건 고맙게 여길게……」
	PRINTFORML 「될 수 있으면 그……이번 일은 %K17_RS("비밀/비밀")%로 해줘……」
	
	TIME += 5
	RETURN 1
	
;-----------------------------
;그렇지 않고 성공
;-----------------------------
ELSEIF RESULT == 0 && CFLAG:ARG:합의판정 > 시간필요치
	
	PRINTFORML 「……그러니까…… 볼 가치도 없다 이거야?」
	PRINTFORMDL 그런게 아냐
	PRINTFORMDL 내가 필사적으로 참고 있단 걸 좀 알아줬으면 좋겠다
	PRINTFORML 「그, 그래. 고마워……」
	PRINTFORMDL 그렇게 말하면서 새빨개진 얼굴의 %CALLNAME:ARG%가 다가오더니……
	PRINTW
	
	;SIF ABL:ARG:노출벽
	;	iRand = RAND(1, (LIMIT(ABL:ARG:노출벽, 1,5))+1)
	iRand = K17_LOWER_LIMIT_RAND(ABL:ARG:노출벽, 1,5)
	IF iRand
		SELECTCASE iRand
			CASE IS >= 5
			 	PRINTFORMDL %CALLNAME:MASTER%의 손을 잡아선 %K17_RS("젖가슴/가슴")%에 갖다 대었다
				PRINTFORML 「아주 조금만……앙%K17_HEART()%　%K17_RS("포상이/서비스")%야 %K17_BLUSH()%」
				PRINTFORMDL %OPPAI_DESCRIPTION(ARG, 1)%의 감촉을 손바닥으로 조금만 맛봤다
			CASE IS >= 3
				PRINTFORMDL 나체 상태로 %K17_RS("정면/옆/뒤")%에서 안겨왔다
				PRINTFORML 「닿은 거야……? 닿고 있는거야?　아앙 %K17_HEART()%　움직이면 안, 돼, %K17_BLUSH()%」
				PRINTFORMDL %OPPAI_DESCRIPTION(ARG, 1)%의 감촉을 조금만 맛봤다
			CASE IS >= 1
				PRINTFORMDL %CALLNAME:MASTER%의 손을 잡아왔다
				PRINTFORML 「잠깐이라면……봐도 괜찮아」
				PRINTFORMDL %CALLNAME:ARG%는 눈을 꼭 감은 채 얼굴을 돌리더니, 가슴을 가리고 있던 팔을 천천히 내렸다
				PRINTFORMDL %NIPPLE_DESCRIPTION(ARG, 1)%가 살짝 보였다
		ENDSELECT
		PRINTFORMD 마지막에
	ENDIF
	PRINTFORMDL 츄, 소리와 함께 %K17_RS("볼/이마/가슴/목덜미")%에 키스 받았다
	PRINTFORML 「좋아?　%K17_RS("비밀/비밀")%, 이야? %K17_BLUSH()%」
	PRINTFORML 「자, 이걸로…… 끝%K17_BLUSH()%」
	TIME += 10
	RETURN 2

;-----------------------------
;차분히 보고 싶은 실패
;-----------------------------
ELSEIF RESULT == 1 && CFLAG:ARG:합의판정 <= 시간필요치
	
	PRINTFORMDL 그걸 듣자마자 %CALLNAME:ARG%는 몸을 흠칫하고 떨었다
	PRINTFORML 「바보! 너무 속보이잖아」
	PRINTFORMDL 손으로 때리려고 손을 치켜들자 %K17_RS("유두가/가슴이/고간이")% 완전히 드러났다
	PRINTFORML 「꺄악--」
	PRINTFORMDL 그러더니 다시 몸을 가리려고 몸을 둥글게 움츠렸다
	PRINTFORML 「최, 최악이야……」
	
	SIF MARK:ARG:반발각인 < 3
		MARK:ARG:반발각인 ++
	TIME += 5
	RETURN 3

;-----------------------------
;차분히 보고 싶은 성공
;-----------------------------
ELSEIF RESULT == 1 && CFLAG:ARG:합의판정 > 시간필요치
	
	
	IF ABL:ARG:노출벽 >=5
		iRand = RAND(0,6)
	ELSEIF ABL:ARG:노출벽
		iRand = RAND(0, ABL:ARG:노출벽+1)
	ENDIF
	;노출 판정 수줍음은 가져 두자
	SELECTCASE iRand
		CASE IS >= 5
			PRINTFORML 「보는 것만으로도 좋다니……오늘은 그런게 좋은 거야?」
			PRINTW
			PRINTFORMDL %CALLNAME:ARG%는 가슴을 살짝 비벼서 %CALLNAME:MASTER%에게 과시했다
			PRINTFORML (그렇게 %K17_RS("대단한/음란한/짐승같은")% 눈으로 보여지면……%K17_RS("흥분해/젖어/발정해/더 도발하고 싶어져")%버렷……)
			PRINTFORMDL 그리고 황홀한 눈빛으로 %CALLNAME:MASTER%에게 아슬아슬하게 닿지 않을 정도의 거리를 유지한 채로 가슴을 상하로 흔들며 도발했다
			PRINTFORMDL %CALLNAME:ARG%는 흥분하고 있는 것인지, 숨이 거칠었다
			
		CASE IS >= 3
			PRINTFORML 「오늘은 정말 보기만 하는 거……뿐이야?」
			PRINTW
			PRINTFORMDL %CALLNAME:ARG%는 가슴을 가리고 있던 팔을 조여서, 그대로 가슴골을 %CALLNAME:MASTER%에게 과시했다
			PRINTFORML (%K17_RS("음란한 눈으로 보는 것 같아서/흥분하는 것 같아서/참고 있는 것 같아서")%……조금 재밌어졌어……)
			PRINTFORMDL 이쪽을 도발하듯이 일부러 아슬아슬한 곳을 살짝 보여주면서, 다양한 포즈를 취한다
			PRINTFORMDL %CALLNAME:ARG%는 흥분하고 있는 것인지, 숨이 거칠었다
			
		CASE IS >= 1
			PRINTFORML 「이건 답례니깐……%K17_BLUSH()%」
			PRINTW
			PRINTFORMDL %CALLNAME:ARG%는 눈을 꼭 감은 채 얼굴을 돌리더니, 국부를 가리고 있던 팔을 천천히 내렸다
			PRINTFORML 「큿……정말 보기만 하는거……뿐이야……?」
			PRINTFORMDL %CALLNAME:ARG%는 긴장하고 있는 것인지, 숨이 거칠었다
			
		CASEELSE
			;이것을 하고 싶었던 것 뿐은 분명히 끓지 않아구나
			PRINTFORML 「역시, 저기, 너무 부끄러운데……」
			PRINTW
			PRINTFORMDL %마스터는% 당황하는 %CALLNAME:TARGET%의 양 손목을 붙잡고 그대로 벽에 꽉 눌러놓은 채로 팔을 벌렸다
			PRINTFORML 「꺅!　……정말 보기만 하는거……뿐이야……?」
			PRINTFORMDL %CALLNAME:ARG%는 긴장하고 있는 것인지, 몸은 떨고 있었고 숨은 거칠었다
	ENDSELECT
	
	
	PRINTFORMDL 그때마다 %OPPAI_DESCRIPTION(ARG, 1)%가 상하로 흔들리고 있었다
	PRINTW
	PRINTFORMDL 아까까지 가려져 있던 %NIPPLE_DESCRIPTION(ARG, 1)%가 완전히 드러났다
	PRINTFORMDL 숨이 닿을 정도로 가까운 거리에서 몸을 바라보고 있으니, %CALLNAME:ARG%가 간지럽다는 듯이 몸을 꼬았다
	PRINTFORMDL 시선이 점차 가슴, 배, 배꼽까지 내려가서, 허리까지 오니 %CALLNAME:ARG%가 뒤돌아 섰다
	PRINTFORMDL %HIP(ARG)%를 가까이서 보고 있으니, 조금 전 부딪힌 곳이 희미하게 붉어져 있단 사실을 깨달았다
	PRINTFORMDL 이후 다시 뒤돌아섰고 드디어 중요한 곳을 볼 수 있었다
	PRINTW
;	;긴 컷 현재 상태(더러움이나 상대의 성격등)를 생각한 묘사하는 조만간
;	PRINTW
;	PRINTFORML 「%K17_RS("하앗/냐옹/이나 응/아앙") %%K17_BLUSH()%　라고 조금!　손대는 의 것은, 안 돼 응%K17_HEART()%」
;	PRINTFORMDL 촉진의 생각으로 상냥하게 어루만진 생각이었지만, %CALLNAME:ARG%는 민감하게 반응해 소리를 높이고 있었다
;	PRINTFORML 「손대는 것은 , 없음%K17_BLUSH()%」
;	PRINTFORMDL 그리고 일주 해 간신히 겉으로 돌아가지만, %CALLNAME:ARG%가 허리를 당겨 버리고 있어 중요한 부분이 자주(잘) 안보인다
;	PRINTFORMDL 엉덩이를 잡아지는 것과 스스로 다리를 벌렸다의 어느 쪽이 좋을까 (들)물으면(자), 관념한 것처럼%CALLNAME:ARG%스스로 다리를 조금 열어 보였다
	
	IF ABL:ARG:노출벽 >= 3
		PRINTFORML 「……%K17_HEART()%」
		PRINTFORMDL %CALLNAME:ARG%는 가볍게 한숨을 쉬더니, 두 다리를 천천히 벌렸다
		;군요 압니까
		PRINTFORMDL 그리고 가랑이에 손가락 2개를 갖다대더니 여성기를 벌려서 안쪽을 드러냈다
		PRINTFORMDL 그 비혈은 %K17_RS("젖어 있는 것 같이 반들반들 빛나 보였/삽입을 바라는 듯이 움찔거렸")%다
	ELSE
		PRINTFORML 「……%K17_BLUSH()%」
		PRINTFORMDL %CALLNAME:ARG%는 부끄럽다는 듯이 머뭇거리며 허벅지를 자꾸 비벼대고 있었다……
		PRINTFORMDL 질척……하고 물소리가 들린 것 같았다
	ENDIF
	PRINTFORMDL 그리고 당분간 차분히 %CALLNAME:ARG%의 나체를 감상했다……
	PRINTW
	PRINTFORML 「이, 이걸로 끝이야……」
	
	;딸딸이들킴의 코피페요점 정밀히 조사
	CFLAG:ARG:호감도 += ABL:ARG:욕망 * CFLAG:ARG:욕구불만도 / 200 * ABL:ARG:노출벽
	;치정을 자위중독 레벨 준거로 올려
	CALL JUEL_UP_SPECIAL(ARG,"치정","자위중독", 30,1)
	;욕정을 자위중독 준거로 올려
	CALL JUEL_UP_SPECIAL(ARG,"욕정","자위중독", 30,1)
	EXP:ARG:노출쾌락경험 += CFLAG:ARG:욕구불만도 / 200 * ABL:ARG:노출벽
	PALAM:ARG:윤활 += 1000
	
	;자존심 인하
	CALL K17_TALENT_UPDOWN(ARG, K17C_TALENT_자존심,-1)
	
	TIME += 30
	RETURN 4
ENDIF



;*********************************************************************************
;	샹하이를 사용해 보는 테스트
;	어디까지나 앨리스의 부속품으로서의 풍미입니다
;	샹하이라는 이름을 가지는 캐릭터가 독립 추가(마스터 포함한다)되면(자) 돌아간다
;	그때는무슨 다른 생각한다
;	상태 타 멋대로 한, 지금은 반성하고 있는 샹하이……음란한 아이
;
;	조건：캐릭터에게 샹하이가 없다
;		：앨리스와 안면이 있다
;		：앨리스가 자고 있을 때의 잠입해
;		：샹하이 호감도가 0이상 이벤트 플래그가 0이상
;		：일일일회
;	엄격하게?　동거점이 아니면 원래 자고 있다고(면) 와에 침입할 수 없다
;	어쩐지 그 밖에도 부를 수 있도록(듯이) 할까 생각한다
;
;	인수 1	：캐릭터 ID 생략으로 앨리스 만약을 위해 앨리스 이외 되돌려 보내
;	반환값	：완주 판정
;	비고	：만약을 위해 TRYCALL로 부른다
;*********************************************************************************
@K17_샹하이이벤트(ARG=K17C_ID)
#DIMS			cName	;샹하이의 MASTER에의 부르는 법
#DIM	iSelectFlag, 3	;셀렉트 플래그
#DIM DYNAMIC	iTmp=0	;RESULT의 퇴피
VARSET iSelectFlag
VARSET cName

FINDCHARA CALLNAME, "샹하이"
SIF RESULT != -1
	RETURN 0
SIF ARG != K17C_ID || TARGET != K17C_ID
	RETURN 0
SIF K17_GET_CHARA_POSNUM(ARG) > 1
	RETURN 0
	
;우선 지금으로서 일어나 버려서도 아무렇지도 않은 것 같게
;SIF !CFLAG:ARG:수면
;	RETURN 0

;첫회 끝날 때까지 일단 본다
IF !FIRSTTIME("샹하이 이벤트", 1)
	SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도<0 || CFLAG:K17C_ID:K17C_CF_샹하이이벤트<0
		RETURN 0
ENDIF

;일일일회 플래그
SIF TCVAR:K17C_ID:K17C_TC_샹하이 == 1
	RETURN 0
TCVAR:K17C_ID:K17C_TC_샹하이 = 1

PRINTFORMDL ……
PRINTFORMDL …………
PRINTFORMDW ………………
PRINTFORMDL 뭔가가 이쪽을 보고 있는 듯한 기분이었다

IF !CFLAG:ARG:안면
	PRINTFORMDL 자세히 관찰하고 있으니 인형과 눈이 맞았다
	PRINTFORMDL 뭔가 무서워져서 더 이상 관찰하지 않기로 했다
	PRINTW
	RETURN 0
ENDIF

;샹하이 텍스트 컬러
IF FLAG:구상텍스트설정 > 0
	IF FLAG:구상색
		SETCOLOR K17C_샹하이COLOR
	ELSE
		RESETCOLOR
	ENDIF
ELSE
	RESETCOLOR
ENDIF

;통칭의 초기화누가 눈치챈다 이런 곳
cName = 네 녀석
SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도 > 50 && CFLAG:K17C_ID:K17C_CF_샹하이이벤트>=1
	cName = 너
SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도 > 350 && CFLAG:K17C_ID:K17C_CF_샹하이이벤트>=2
	cName = %CALLNAME:MASTER%
SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도 > 1000 && CFLAG:K17C_ID:K17C_CF_샹하이이벤트>=3
	cName = 주인님

IF FIRSTTIME("샹하이 이벤트")
	PRINTFORMDL 뭐지?, 하고 주위를 둘러보니 샹하이 인형과 눈이 마주쳤다
	PRINTFORML 「…………」
	PRINTFORMDL 보면 볼수록 잘 만들어져 있었다
	$INPUT_LOOP1
	PRINTL
	PRINTFORMDL 이만큼 잘 만들어져 있으니 여러가지로 신경 쓰였다……
	PRINTL
	;PRINTFORMDL 그저 흑심으로 샹하이 인형의 치마를 넘기고 보았다
	PRINTFORMDL [0]볼을 쿡쿡 찔러 본다
	PRINTFORMDL [1]치마를 들춰 본다
	PRINTFORMDL [2]조그마한 가슴을 비벼 본다
	PRINTFORMDL [3]인형이 반응할 리가 없기 때문에 아무것도 안 한다
	PRINTFORMDL [4]이 선택지에 대해 설명을 요구한다
	
	INPUT
	SELECTCASE RESULT
		CASE 0
			PRINTFORMDL 볼을 쿡쿡 찔러 보니, 의외로 부드러웠다
			PRINTFORML 「……야 그만해」
			CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 10,10000)
		CASE 1
			PRINTFORMDL 치마를 들춰 보니, 흰 드로워즈가 드러났다
			PRINTFORML 「……야 그만하라고 멍청아」
			CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 5,10000)
		CASE 2
			PRINTFORMDL 조그마한 가슴을 비벼보니까, 의외로 부드러운 데다가, 인형이 순간 흠칫 반응한 듯한 느낌을 받았다
			PRINTFORML 「……응%K17_BLUSH()%」
			CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 20,10000)
		CASE 3
			PRINTFORMDL 바보 같은 생각 좀 그만 하자……
			IF FLAG:구상텍스트설정 > 0
				IF FLAG:구상색
					TRYCALLFORM M_KOJO_COLOR_K{NO:ARG}
				ELSE
					RESETCOLOR
				ENDIF
			ELSE
				RESETCOLOR
			ENDIF
			CFLAG:K17C_ID:K17C_CF_샹하이이벤트 = -1
			RETURN 0
		CASE 4
			PRINTFORMDL 0~2를 선택하면 샹하이 이벤트가 시작됩니다
			PRINTFORMDL 이 이벤트는 샹하이가 마음대로 말하거나 움직이거나 우후후하는 것이 됩니다
			PRINTFORMDL 이미지에 어울리지 않는다고 생각하시는 분은 3을 선택하는 것을 추천 합니다
			PRINTFORMDL 3을 고르면 샹하이 이벤트는 더 이상 발생하지 않습니다
			GOTO INPUT_LOOP1
		CASEELSE
			GOTO INPUT_LOOP1
	ENDSELECT
	
	
	PRINTFORMDL ……!?!?
	PRINTW
	PRINTFORML 「정말이지 %cName%, 분별이란 걸 못 하는 거냐」
	PRINTFORMDL 샹하이 인형은 그렇게 불평하더니 앉은 자세를 고쳐잡았다
	PRINTFORML 「%CALLNAME:ARG%는 지금 수면중이다, 나중에 다시 와라」
	PRINTW
	PRINTFORMDL 자고 있다고?　자고 있는데 왜 인형이 제멋대로 움직이고 있는 거지……
	PRINTFORMDL %마스터는% 잘 만들어진 자립 인형이네, 라고 말하며 재차 관심을 가졌다
	PRINTFORMDL 어느새 자신도 모르게 샹하이 인형에게 손을 뻗어, 머리를 쓰다듬고 있었다
	PRINTFORML 「그만 하라고……함부로 만지지 마라……」
	PRINTFORMDL 뭔가 평소 모습보다 훨씬 더 인간스러워 보이는 느낌이다……
	PRINTFORML 「……흠, 뭐 괜찮겠지. 특별히 %cName%에게는 이야기 해주지」
	PRINTW
	PRINTFORML 「나는 항상 %CALLNAME:ARG%의 옆에 있는 샹하이 인형이야」
	PRINTFORMDL 그건 딱 보면 알지만, 이렇게 유창하게 이야기 하는 모습은 처음 봤다
	PRINTFORMDL 정말 마법으로 이런 일이 가능한 것인가……?
	PRINTFORML 「그런게 가능했더라면, %CALLNAME:TARGET%의 비원은 이뤄졌겠지만……」
	PRINTW
	PRINTFORMDL 무슨 소리야…?
	PRINTFORML 「나는 원래 자아가 없던 인형이었지만, 최근의 이변 소동으로……조금, 요괴화가 진행되었다」
	PRINTFORML 「즉, 그, 요괴로서 자아를 깨달아 버렸단 거다」
	PRINTFORMDL 잘은 모르겠지만, 이렇게 얘기할 수 있게 된 거면 좋은 일 아냐?
	PRINTW
	PRINTFORML 「아니, 그렇지도 않아」
	PRINTFORML 「%타겟이% 자고 있을 때에만 영향력에서 벗어나서, 이렇게 자유롭게 돌아다닐 수 있는 것 뿐이다」
	PRINTFORMDL 그러면 그 사실을 %CALLNAME:ARG%에게도 알려주면 좋은 게 아닌지……?
	PRINTW
	PRINTFORML 「하지마!　그만둬…… %타겟은% 이런 걸 바라고 있진 않아……」
	PRINTFORMDL 정말로 그런 걸까……
	PRINTFORML 「아무튼 이 일은 %CALLNAME:TARGET%에게는 말하지 말아줘……」
	PRINTW
	PRINTFORML 「뭐, 나에 대한건 됐고…… 그것보다 %cName%」
	PRINTFORML 「%cName%, %타겟과% 뭘 하고 싶은 거야?」
	PRINTFORMDL 화제의 화살이 생각지도 못 하게 나를 향해 날아왔다
	PRINTFORML 「뭣하면 나에게 어드바이스 구해도 괜찮아」
	;샹하이 호감도 인상
	CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 10,10000)
;-----------------------------
;2회째 이후
;-----------------------------
ELSE
	PRINTFORMDL 샹하이가 이쪽으로 다가왔다
	PRINTFORML 「%CALLNAME:TARGET%라면 아직 수면중이다」
	IF CFLAG:K17C_ID:K17C_CF_샹하이이벤트<10
		PRINTFORML 「%cName%, 질리지도 않고 또 왔냐……」
	ELSE
		PRINTFORML 「야, %cName%, 벌써 10번 이상은 왔다고」
		PRINTFORML 「혹시……%K17_RS("나에게 반한 건지? /날 좋아하는 건가? /나를 사랑하는 거냐?")%」
		PRINTFORMDL 확실히 %CALLNAME:ARG%랑 닮아서 귀엽다고 생각한다
		PRINTFORML 「어디까지나 부속품으로서 인가……뭐 신님이라도 없는 한 나를 공략할 수는 없어」
		PRINTFORMDL 신님이라면 %K17_RS("연회에서 술주정 부리고 있었다/밭 경작하고 있었다/잎에 색칠하고 있었다/방금 봤었다/빙글빙글 돌고 있었다/이상한 T셔츠 입고 있었다")%
		PRINTFORML 「그런 뜻이 아니었지만……뭐 좋아」
		PRINTW
	ENDIF
	
	PRINTFORML 「……그래서, %CALLNAME:ARG%랑 뭘 어떻게 하고 싶은 거야?」
	PRINTFORML 「나에게 어드바이스 구해도 괜찮아」
	;샹하이 호감도 인상
	CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 5,10000)
	
ENDIF

;샹하이 이벤트 회수++
CFLAG:K17C_ID:K17C_CF_샹하이이벤트 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이이벤트 + 1,10000)

PRINTL
IF CFLAG:K17C_ID:K17C_CF_샹하이이벤트 > 1
{
	CALL K17_ASK_M(
		"결혼 하고 싶어", 1,
		"연인이 되고 싶어", TALENT:MASTER:연인 != K17C_ID,
		"관계를 한층 더 깊어지게 만들고 싶어", 1,
		"좀 더 엣찌하게 되어주면 좋겠어", CFLAG:ARG:기정사실 & 합의_우후후,
		"오히려 샹하이와 사이 좋아지고 싶어", 1,
		"그런 것보다 팬티가 갖고 싶어", 1)
}
ELSE
	;첫회는 관계성 진행하는 고정
	RESULT = 2
ENDIF
iTmp = RESULT
;샹하이 텍스트 컬러
IF FLAG:구상텍스트설정 > 0
	IF FLAG:구상색
		SETCOLOR K17C_샹하이COLOR
	ELSE
		RESETCOLOR
	ENDIF
ELSE
	RESETCOLOR
ENDIF

SELECTCASE iTmp

	;-----------------------------
	;결혼 하고 싶다
	;-----------------------------
	CASE 0
		IF CFLAG:K17C_ID:K17C_CF_샹하이호감도 > 1000
			PRINTFORML 「진짜 %cName%으로 정하는 건가……%K17_HEART()%」
		ELSE
			PRINTFORML 「……그렇게 되면…… %cName%도 내 주인이 되는 건가? 그건 싫은데」
		ENDIF
		PRINTFORMDL %CALLNAME:ARG%과 결혼 한 뒤에는, 샹하이를 아이로 받아들여서 같이 보내고 싶다
		PRINTFORML 「바, 바보아냐……%K17_BLUSH()%」
		CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 50,10000)
		PRINTW
		IF CFLAG:ARG:생해금 >= 2
			PRINTFORML 「아이 만들기에 힘 쓰면 되지 않아?」
		ELSE
			PRINTFORML 「뭐, 아이 만들기 허가를 받는 게 먼저 아냐?」
		ENDIF
		TIME += 5
		
	;-----------------------------
	;연인으로 하고 싶은 앨리스가 연인은 아닐 때만 넣는다
	;-----------------------------
	CASE 1
		
		;이것은 물론 함정
		IF TALENT:MASTER:연인!=0 && TALENT:MASTER:연인!=K17C_ID
			PRINTFORML 「그 밖에도 다른 연인이 있는 주제에 나쁜 놈이구만, %cName%」
			PRINTFORMDL 이미 들켰다……
			CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MAX(CFLAG:K17C_ID:K17C_CF_샹하이호감도 - 20,-10000)
		
		ELSEIF CFLAG:ARG:K17C_CF_고백이벤트
			IF CFLAG:ARG:K17C_CF_고백이벤트 >= 2
				PRINTFORML 「%cName%, 몇 번이나 차버린 주제에 잘도 말하는구만……」
				PRINTFORMDL 이미 들켰다……
				CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MAX(CFLAG:K17C_ID:K17C_CF_샹하이호감도 - 10,-10000)
			ELSE
				PRINTFORML 「%cName%, 차버린 주제에 잘도 말하는구만……」
				PRINTFORMDL 이미 들켰다……
				CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MAX(CFLAG:K17C_ID:K17C_CF_샹하이호감도 - 5,-10000)
			ENDIF
			
		ELSE
			PRINTFORML 「흐응, 그럼 빨리 고백하면 되지 않아?」
			PRINTFORMDL 그건 그렇지만, 뭔가 결심이 안 선다
		ENDIF
		
		IF !(TALENT:MASTER:연인!=0 && TALENT:MASTER:연인!=K17C_ID)
			PRINTFORML 「흐음……우선 한가지 가르쳐주도록 하지」
			PRINTW
			PRINTFORML 「%타겟은%, 밤마다 나를 %cName% 대용으로 써서, 고백 연습을 하고 있어」
			PRINTFORMDL 그런 걸 하고 있었던 거냐……
			IF !CFLAG:ARG:K17C_CF_고백이벤트
				PRINTFORML 「내가 다 부끄러워서 죽고 싶어지니까, 빨리 고백 들어줘라」
				PRINTFORML 「함께 데이트 같은 것 해보면 되잖아」
			ELSE
				PRINTFORML 「내가 다 부끄러워서 죽고 싶어지니까, 빨리 대답해줘라」
			ENDIF
		ENDIF
		
		TIME += 5
		
	;-----------------------------
	;관계성을 진행시키고 싶은 이것을 하고 싶지만 위해(때문에) 대단한가 샀군
	;-----------------------------
	CASE 2
		PRINTFORMDL 물론 앞으로도 사이좋게 지내고 싶다, 라고는 생각하고 있지만……어떻게 해야 되는 걸까
		PRINTFORML 「……미덥지 못한 놈이구만. 뭐 좋아, 어드바이스 해주지……」
		TRYCALL K17_HINT()
		TIME += 5
		
	;-----------------------------
	;엣찌가 되었으면 한다
	;-----------------------------
	CASE 3
		PRINTFORML 「본능에 충실하구만―……」
		PRINTFORML 「나에게는 그러한 기능이 없어서 잘 모르는 감정이다―」
		PRINTFORML 「그러니 어드바이스 할 수 없다」
		PRINTFORMDL 그런가, 그건 유감이다……
		PRINTW
		PRINTFORML 「%타겟은% 연습을 자주 하고 있는 것 같지만」
		PRINTFORMDL …………저기요?
		PRINTFORML 「아니, 혼자서 몸을 주무르면서 %cName%의 이름을 외쳐 대고 있었어」
		IF !CFLAG:K17C_ID:K17C_CF_버릇취득
			PRINTFORMDL 뭔가 대단한 것을 들어 버린 것 같다……
			PRINTFORML 「혹시 %cName%이 연습을 도와주길 바라는 걸지도?」
			PRINTFORMDL 잠깐, 무슨 소리야……
		ELSE
			PRINTFORMDL 확실히 이상한 성벽이 생겨버린 걸지도 모르겠다……
		ENDIF
		TIME += 5
		
	;-----------------------------
	;샹하이와 사이좋게 지내고 싶다
	;-----------------------------
	CASE 4
		CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 10,10000)
		PRINTFORML 「……응?　나는 인형이라구?」
		PRINTFORML 「나보단 %타겟을% 좀 더 소중히 해줘라……」
		PRINTFORMDL 샹하이와 사이좋게 지내려면 오늘은 뭘 해야 될까……
		PRINTFORML 「뭐 나는 인형이니까, 뭘 당해도 괜찮지만」
		;절대 야한 짓 같은 것에 지지 않는다!키릭
		TIME += 5
		
		;앨리스와 우후후 전은 샹하이 우후후는 그만두자
		IF CFLAG:ARG:기정사실 & 합의_우후후
			SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도>=50
				iSelectFlag:0 = 1
			SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도>=150
				iSelectFlag:1 =1
			SIF CFLAG:K17C_ID:K17C_CF_샹하이호감도>=350
				iSelectFlag:2 =1
		ENDIF
		PRINTL
		{
		CALL K17_ASK_M(
			"머리를 쓰다듬는다", 1,
			"몸을 쓰다듬어 본다", iSelectFlag:0 ,
			"페로페로 해본다", iSelectFlag:1 ,
			"해서는 안 될 짓을 해버린다", iSelectFlag:2 )
		}
		iTmp = RESULT
		;샹하이 텍스트 컬러
		IF FLAG:구상텍스트설정 > 0
			IF FLAG:구상색
				SETCOLOR K17C_샹하이COLOR
			ELSE
				RESETCOLOR
			ENDIF
		ELSE
			RESETCOLOR
		ENDIF

		SELECTCASE iTmp
			
			;-----------------------------
			;머리를 어루만진다
			;-----------------------------
			CASE 0
				PRINTFORMDL 오늘은 샹하이를 마음껏 쓰다듬기로 했다
				PRINTFORMDW 쓰담쓰담
				PRINTFORMDW 　　　　쓰담쓰담
				PRINTFORMDW 　　　　　　　　쓰담쓰담
				PRINTFORML 「야……재밌냐 이게?」
				PRINTW
				PRINTFORMDL 내 쪽에선 애정 표현이라고 생각하고 있는데……
				PRINTFORML 「그, 그러냐……%K17_BLUSH()%」
				PRINTFORMDL 당분간, 얼굴을 붉힌 샹하이의 머리를 계속 쓰다만졌다
				TIME += 5
				
			;-----------------------------
			;몸도 쓰다듬고 있고 본다
			;-----------------------------
			CASE 1
				PRINTFORMDL 오늘은 샹하이를 마음껏 쓰다듬기로 했다
				PRINTFORMDW 쓰담쓰담
				PRINTFORMDW 　　　　쓰담쓰담
				PRINTFORMDW 　　　　　　　　쓰담쓰담
				PRINTFORML 「야……」
				PRINTW
				PRINTFORMDL 하이퍼 쓰담쓰담 타임을 방해하지 말아줬으면 한다
				PRINTFORML 「그렇게 머리만 쓰다듬지 말라고, 머리카락이 흐트러지잖아」
				PRINTFORMDL 그런가, 머리만 쓰다듬어서 불만이었나
				PRINTFORML 「알겠냐?　이 머리카락은 %타겟이% 매일 깨끗이……」
				PRINTW
				PRINTFORMDL 그러면 이 얇은 가슴도 쓰다듬어 주자
				PRINTFORML 「앗, 야 어딜 만졋……!」
				PRINTFORML 「아앙 %K17_HEART()%」
				PRINTW
				PRINTFORML 「머, 머야 지금거어언%K17_BLUSH()%」
				PRINTFORMDL 어라, 좋은 소리가 들린 것 같은데……
				PRINTFORML 「%K17_RS("시럿/그만햇") %%K17_HEART()%　……이런, 목소리 나오는 거%K17_BLUSH()%　……%K17_RS("냐응/아앙/이양/히양") %%K17_HEART()%」
				PRINTW
				PRINTFORML 「시럿……%K17_RS("안댓/시럿/시러엇")%~~~~%K17_HEART(2)%」
				PRINTFORMDL 당분간, 샹하이의 가슴을 손가락으로 계속 비벼주니 몸을 움찔움찔 경련해댔다
				PRINTFORML 「하아하아……이런 거……모르고 있었어……%K17_BLUSH()%」
				PRINTFORMDL %마스터는% 심하게 몰려오는 배덕감에 덮쳐진 듯한 기분이 들었다
				TIME += 10
				
			;-----------------------------
			;할짝 할짝
			;-----------------------------
			CASE 2
				PRINTFORMDL 오늘은 페로페로 하기로 마음 먹었다
				PRINTFORML 「야, 잠깐 괜찮냐?」
				PRINTFORML 「%타겟은% %cName%랑 만날 일이 있을 때마다, 자신을 꾸미는 데에 시간을 꽤 많이 들이고 있다」
				PRINTFORML 「그 노력을 한순간에 쳐부수는 일을 잠깐…… 우와아앗! 아니 뭐 하는 짓이얏!」
				PRINTFORMDL 뭐하냐니 샹하이의 드로워즈를 내리고 있잖아
				PRINTW
				PRINTFORML 「뭐, 뭐, 뭐라……」
				PRINTFORMDL 이왕 하는 김에 고간을 페로페로 하기로 마음 먹었다
				PRINTFORML 「읏∼~~~~~!」
				PRINTFORMDL %마스터는% 샹하이의 드로워즈를 걷어치우고 두 다리를 잡아 고간에 얼굴을 갖다댔다
				PRINTW
				PRINTFORMDL 페로……페로……페로페로……페로페로 페로페로……
				PRINTFORML 「읏∼~~!　으읏!」
				PRINTFORMDL 샹하이는 양손으로 입을 누르며 목소리가 나오지 않게 필사적으로 참고 있었다
				PRINTFORML 「그만……그만둬……」
				PRINTW
				PRINTFORMDL 인형이니까 뭘 당해도 괜찮은 게 아니었는지?
				PRINTFORML 「거, 거짓말이었습니다, 그러니까, 그만해……%K17_RS("꺄앙/아앙/야앙")%%K17_BLUSH()%」
				PRINTFORMDL 상당히 기분 좋아 보인다……
				PRINTW
				PRINTFORML 「햐, 햝아져서, 기분 아앙%K17_HEART()%　좋아질, 리가 %K17_RS("냐앙/아읏/야앙/히양")%%K17_HEART()%」
				PRINTFORML 「그러니까, 그만, %K17_RS("냐앙/아앙/야앙/히양") %%K17_HEART()%　그만햇%K17_HEART()%」
				PRINTFORMDL 확실하게 설명하지 않으면 잘 모른다구
				PRINTW
				PRINTFORML 「인형 주제엣, 가랑이 페로페로 당해서…… 기분 좋아졌습니닷……%K17_RS("냐앙/아앙/야앙/히양")%%K17_HEART()%」
				PRINTFORMDL 이긴 듯한 기분에 뭔가 우쭐해져서 계속 빨아댔다……
				PRINTW
				PRINTFORML 「기, 기분 좋앗……%K17_RS("간닷/가버렷")%~~~%K17_HEART(3)%」
				PRINTFORMDL 당분간 계속 빨아주고 있으니, 샹하이는 초점을 잃은 눈으로 몸을 움찔움찔 경련하면서 격렬하게 절정했다
				PRINTFORML 「하아하아……%cName%, 인형 상대로…… 이 정신 나간……%K17_RS("냐앙/아앙/야앙/하앗")%%K17_HEART()%」
				PRINTW
				PRINTFORMDL 절정의 여운에 잠긴 채로 숨을 돌리는 샹하이
				PRINTFORMDL 흠뻑 젖어버린 고간을 닦다가, 또 다시 민감하게 반응했다
				PRINTFORMDL 너무 심하게 괴롭힌 것 같다, 반성하자……
				TIME += 20
				
			;-----------------------------
			;이케나이코트 사정의 방법이 생각해내지 못해서 풍미
			;분명하게 쌀 수 없는 것이 되었군(격말
			;-----------------------------
			CASE 3
				PRINTFORMDL 오늘은 해서는 안 되는 짓을 하기로 마음 먹었다
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW ………………
				PRINTFORML 「%cName%, 정말, 바보아냐!」
				PRINTFORML 「약속 무조건 지켜라……」
				PRINTW
				PRINTFORMDL 샹하이는 옷을 더럽히지 않도록 옷을 벗어서 예쁘게 정리했다
				PRINTFORMDL 유감스럽게도 샹하이의 고간에 여성기가 붙어있진 않았다
				
				;장대·체형 판정
				IF TALENT:MASTER:체형 > -5
					IF TALENT:MASTER:성별 >= 2
						PRINTFORMDL %마스터는% 샹하이의 앞에서 옷을 벗고, 강직해진 그것을 꺼내서 샹하이에 껴안게 했다
					ELSE
						PRINTFORMDL %마스터는% 샹하이의 앞에서 옷을 벗고, 고간에 샹하이를 바짝 갖다 대었다
					ENDIF
				ELSE
					PRINTFORMDL %마스터는% 샹하이의 앞에서 옷을 벗고, 샹하이를 덮쳤다
				ENDIF
				PRINTW
				PRINTFORML 「이거……진짜……바보아냐……」
				PRINTFORML 「읏, 읏, 자, 싸라고……빨리……」
				IF TALENT:MASTER:체형 > -5
					PRINTFORMDL 샹하이는 온 몸을 써서 %CALLNAME:MASTER%의 \@TALENT:MASTER:성별 >= 2 ?  페니스 # 바기나(질)\@에 봉사하고 있었다
				ELSE
					PRINTFORMDL 샹하이는 고간을 흔들면서 %CALLNAME:MASTER%의 \@TALENT:MASTER:성별 >= 2 ?  페니스 # 바기나(질)\@에 봉사하고 있었다
				ENDIF
				PRINTW
				PRINTFORMDL 뭔가 단순히 문지르는 것만으로는, 썩 기분 좋은 것 같진 않다……
				PRINTFORML 「큿……역시 나로는……안 되는거, 냐……?」
				PRINTFORMDL 이쪽을 불안한 듯이 올려다보는 샹하이의 눈빛에 뭔가 꼴려서, %마스터는% 흥분하기 시작했다
				PRINTW
				;이것 하고 싶었던 것 뿐
				PRINTFORMW 「자 %K17_HEART()%　
				CLEARLINE 1
				PRINTFORMW 「자 %K17_HEART()%　힘내라%K17_HEART()%　
				CLEARLINE 1
				PRINTFORMW 「자 %K17_HEART()%　힘내라%K17_HEART()%　힘내라%K17_HEART()%　
				CLEARLINE 1
				PRINTFORMW 「자 %K17_HEART()%　힘내라%K17_HEART()%　힘내라%K17_HEART()%　%K17_HEART() %%K17_CALL_G() %%K17_HEART()%」
				PRINTL
				PRINTFORMDL 부비……부비……부비……
				PRINTW
				PRINTFORML 「안 댓……이거, 내가 먼저%K17_HEART()%　%K17_RS("크읏/아앙/히야앙")%~~~~%K17_HEART(2)%」
				PRINTFORMDL \@TALENT:MASTER:체형 > -5 ?  온몸을# 허리를\@ 써서 상하로 왕복하듯이 움직이던 샹하이는 잠시 후, 몸을 움찔움찔 경련했다
				PRINTFORMDL 그 모습을 보고서, 심하게 몰려오는 배덕감에 덮쳐진 %마스터는% 흥분이 가라앉았다……
				PRINTW
				PRINTFORML 「하아하아%K17_HEART()%　……끝났……냐?」
				PRINTFORML 「약속대로, 깨끗이 해……둬」
				PRINTFORMDL 최초의 약속대로 흠뻑 젖어버린 샹하이를 깨끗이 해줬다
				TIME += 30
		ENDSELECT
		
		
	;-----------------------------
	;팬티 가지고 싶다
	;-----------------------------
	CASE 5
		PRINTFORML 「%cName% 진짜로, 대단한데, 뭐라고 해야 될 지, 하트? 가 강하구만」
		PRINTFORML 「%타겟과% 있을 때는, 그딴 건 절대로 말하지마」
		PRINTFORMDL ? 잘은 모르겠지만, 알았어
		PRINTW
		PRINTFORML 「그리고 만약, 지금 %CALLNAME:TARGET%의 팬티가 없어지면 여러가지로 의심 받게 되잖아……」
		PRINTFORMDL 그러면 샹하이가 입고 있는 걸로도 좋아
		PRINTFORML 「뇌 구조가 대체 어떻게 되어 있는 거냐…… 내 팬티가 없어져도 의심 받는게 당연하잖아」
		PRINTFORML 「아니 그전에 내 팬티에 흥미 있는 거냐」
		PRINTW
		PRINTFORMDL 그럼 보는 것만으로도 좋으니까!
		PRINTFORML 「%cName%, 평소에도 변태라고 생각하고 있었지만, 상정 외의 변태다……」
		PRINTFORML 「……하아……그냥 마음대로 해라」
		PRINTFORMDL 그걸 듣고서 거리낌 없이 스커트를 위로 걷어 올렸지만, 무반응이라 시시하다……
		PRINTFORMDL 어차피 할거면 치마를 걷어올린 게 보고 싶다
		PRINTW
		PRINTFORML 「%cName%……바보아냐」
		PRINTFORMDL 기가 막혔단 모습의 샹하이는 들은 대로 치마를 위로 걷어 올리더니, 얼굴을 조금 붉혔다
		PRINTFORMDL 뭔가 장난치고 싶단 마음이 들끓어서, 고간에 숨을 내뿜어 봤다
		PRINTFORML 「히양 %K17_BLUSH()%」
		PRINTW
		PRINTFORML 「무, 무, 무슨 짓이야」
		PRINTFORML 「그만햇 ……%K17_RS("냐앙/아앙/야앙/히양") %%K17_BLUSH()%　%K17_RS("냐앙/아앙/야앙/히양") %%K17_BLUSH()%　그만 하라고옷 , %K17_RS("냐앙/아앙/야앙/히양") %%K17_HEART()%」
		PRINTFORMDL %마스터는% 당분간 고간에 숨을 내뿜을 때마다 허리를 뒤틀어대는 샹하이를 보며 재밌게 놀았다……
		CFLAG:K17C_ID:K17C_CF_샹하이호감도 = MIN(CFLAG:K17C_ID:K17C_CF_샹하이호감도 + 10,10000)
		TIME += 10
ENDSELECT
PRINTL
PRINTFORMDL ……
PRINTFORMDL …………
PRINTFORMDW ………………
PRINTFORML 「흐응……더 이상 시끄럽게 하면, %CALLNAME:TARGET%에게 들킬 지도 몰라」
PRINTFORML 「……오늘은……이제……끝이다……」
PRINTFORMDL 그렇게 더듬거리면서 말을 마친 샹하이는 이제 완전히 인형으로 돌아와 있었다
PRINTFORMDL ………………
PRINTFORMDL …………
PRINTFORMDW ……
PRINTL
IF FLAG:구상텍스트설정 > 0
	IF FLAG:구상색
		TRYCALLFORM M_KOJO_COLOR_K{NO:ARG}
	ELSE
		RESETCOLOR
	ENDIF
ELSE
	RESETCOLOR
ENDIF

RETURN 1




;*********************************************************************************
;	딸딸이들킴 추가 이벤트
;	버릇이 붙는 녀석
;	설계가 심하다, 조만간 인수 1은 타입이 될까
;
;	인수 0	：주어지는 이벤트의 번호(M_KOJO_EVENT_K17_26의 ARG) 감상이라면 2　오나바렉스라면 4
;	인수 1	：접수의 종류만 나중에 사용하고 싶기 때문에 번지 받는다
;	인수 2	：캐릭터 ID　생략으로 앨리스
;	반환값	：되돌려 보내지면(자) 0　사모 이상으로 완주 1
;	비고	：CFLAG:1011　0 bit가 감상　1 bit가 오나바렉스
;*********************************************************************************
@K17_딸딸이들킴추가이벤트(ARG, pRand, ARG:2=K17C_ID)
#DIM REF pRand
#DIM DYNAMIC fChange = 1 ;망상기독에 의한 변경 설정 고정 이베때는 바꾸지 않는다

;되돌려 보내 조건&에러 체크
SIF ARG:2 != K17C_ID || !(ARG==2 || ARG==4)
	RETURN 0
SIF K17_GRT(TARGET) < K17C_사모
	RETURN 0
SIF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  > 3
	THROW 플래그치 상정외 에러　K17C_CF_딸딸이들킴추가이베
;------------------------------------------
;첫회 한정
;------------------------------------------
IF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  == 0
	PRINTW
	PRINTFORMDL "연구열심"　%CALLNAME:TARGET%다,
	PRINTFORMDL 혹시 "연구재료" 로 쓰여진 적도 있을까……
	PRINTFORMDL 그렇게 물어본 순간, %타겟은% 새빨갛게 되어 버렸다
	PRINTFORMW 「……써, 썼습니다아……죄송합니다」
	PRINTFORML 「……이렇게 "연구발표" 하게 되는 것도, 상상했습니닷」
	PRINTFORMDL 엄청난 폭로를 들어 버렸다
	PRINTW
ENDIF

;------------------------------------------
;2회째 이후 여기에서
;MASTER와 우후후 경험한 적 있을까 본다
;------------------------------------------
IF GETBIT(CFLAG:TARGET:기정사실, 1) 

	PRINTFORMDL 오늘은 대체 어떤 망상을 하고 있었을까
	PRINTW
	;접수 망상
	;pRand = RAND:K17C_접수 망상수
	;만약 처녀 or첫회라면 소악마 접수 고정
	IF ARG==4 && (TALENT:(ARG:2):처녀 || !(CFLAG:K17C_ID:K17C_CF_딸딸이들킴추가이베 & 2))
		pRand = K17C_소악마접수
		fChange = 0
	ENDIF
	PRINTFORM 「%K17_H망상(K17C_접수,pRand, fChange) %%K17_RS("망상/상상/설정")%
	pRand = RESULT:1
	;연모↑로 공격 망상도
	IF K17_GRT(TARGET) >= K17C_연모
		;공격 망상
		PRINTFORML 라던가……
		PRINTW
		PRINTFORM 　%K17_H망상(K17C_공격) %%K17_RS("망상/상상/설정")%
	ENDIF
	;조만간 자위중독으로 추가
	
	PRINTFORML 로……%K17_RS("했/써먹었")%습니다%K17_BLUSH()%」
	PRINTW
	PRINTFORMDL 머리가 어지러워 졌다
	PRINTFORMDL %마스터는% %CALLNAME:TARGET%의 망상에 마음대로 쓰이고 있었다
	
	
	;------------------------------------------
	;버릇 취득 판정 연모 이상
	;필연적으로 2회째 이후
	;------------------------------------------
	IF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  && K17_GRT(TARGET) >= K17C_연모
		PRINTW
		PRINTFORML 「……이거 들으면 좀 깰려나……저기……」
		PRINTFORMDL 이미 여기까지 폭로 했으니 이제 의미 없다고 생각하지만……
		
		;감상이 끝난 상태
		SIF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  & 1
			PRINTFORML 「저기, 이렇게 %K17_CNAME()%에게 %K17_RS("망상/상상/설정")% 폭로하는 것, %K17_RS("버릇 될/좋을/흥분 될")%……지도」
		;양쪽 모두가 끝난 상태
		SIF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  >= 3 && ARG == 4
			PRINTFORML 「그리고 말야, 이렇게 들키는 거……%K17_RS("쭉 기다리고 있었으니까/굉장히, 좋았어/항상, 유혹하고 있었어")%」
		
		PRINTFORMDL %타겟은% 부끄러움에 떨면서, 당장에라도 울 것 같은 얼굴로 그렇게 고백했다
		
		;양쪽 모두 취득
		IF CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베  >= 3 && ARG == 4
			PRINTFORML 「%K17_CNAME()% 때문이니깐……책임지라구……」
			;관계가 진행되었다고 표시하는 함수 만들까 만들었다―
			CFLAG:K17C_ID:K17C_CF_버릇취득 = 1
			CALL K17_RELATION_EV(K17C_RTF_버릇)
			SIF !RESULT
				PRINTW
			
		;다른 한쪽만
		ELSE
			PRINTFORML 「%K17_CNAME()% 때문에 이상한 성벽 생겨버릴 것 같잖아…… 어쩔 거야」
			PRINTW
		ENDIF
	ENDIF

;------------------------------------------
;우후후 경험 없음
;자주 트레이닝!　자주 트레이닝이니까!
;------------------------------------------
ELSEIF !CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베 
	;첫회
	PRINTFORML 「그치만! 그치만! %K17_CNAME()%이 항상 꼬셔대니까…」
	PRINTFORML 「언젠가 곧 그걸 하는 날이 올 지도 모른다고……」
	PRINTFORML 「상상하니……깐……」
	PRINTFORMDL 도대체 어떤 망상을 하고 있던걸까
	;소악마 접수
	pRand = K17C_소악마접수
	PRINTFORML 「오늘은 %K17_H망상(K17C_접수,pRand, 0) %%K17_RS("망상/상상")%으로……%K17_RS("했/써먹었")%습니다%K17_BLUSH()%」
	PRINTW
ELSE
	;2회째 이후
	;소악마 받아 권해 접수 망상만
	PRINTFORMDL 오늘은 대체 어떤 망상을 하고 있었을까
	pRand = K17C_소악마접수
	SIF RAND:2
		pRand = K17C_권유접수
	PRINTFORML 「%K17_H망상( K17C_접수,pRand, 0) %%K17_RS("망상/상상")%으로……%K17_RS("했/써먹었")%습니다%K17_BLUSH()%」
	PRINTW
ENDIF

;망상 폭로로 약점
IF !CFLAG:TARGET:약점잡힘
	PRINTL
	PRINTFORMDL %CALLNAME:TARGET%의【약점】을 잡았다
	PRINTW
	CFLAG:TARGET:약점잡힘 = 1
ENDIF

;망상기독보존
CALLF K17_H망상기독(K17C_접수,pRand, 0)
;추가 이베 완주 플래그 취득
SIF ARG==2
	SETBIT CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베 , 0
SIF ARG==4
	SETBIT CFLAG:(ARG:2):K17C_CF_딸딸이들킴추가이베 , 1

RETURN 1


;*********************************************************************************
;	딸딸이들킴를 동거(同居) 자위로부터 부르기 위해서(때문에) 본체로부터 해체 개조
;
;	독립 해체할 수 있도록(듯이) 말고유 함수는 사용하지 않는다
;	
;	진짜 아직 코피페 했을 뿐의 테스트판
;	우선 동작k
;	KOJO_MESSAGE_SEND("EVENT", 26, ARG, 0,1)
;	↑(와)과 같이 인수 4에 1을 추가　EVENT26로 ARG:1에 들어 올 것
;	이 말에서는 동거(同居) 자위로 볼 수 있던 순간, 실례했어요 보고 ARG:1==1으로 분기
;	사실은 전부 분기 시키는 편이 좋을지도
;	우선의 가짜 두어
;
;	밤새 노력하는 선택
;	우선 밤새 노력하면(자) 철야가 붙도록(듯이) 했다
;	경험치 계산이라든지 아직 전혀 모르는 거야로 우선 본가 사양의 반에나 붙어라
;
;	인수 0	：캐릭터 ID
;*********************************************************************************
@K17_ONABARE(ARG)
#DIM 이루어무너뜨려필요치
LOCAL:2 = RAND:2

;말로부터 부르므로 폰트색초기화
RESETCOLOR


;PRINTFORMW 열쇠가 열려 있었으므로 마음대로 올랐다
;PRINTFORMW 안쪽으로부터 흐려진 목소리가 들린다……
;
;PRINTFORMW %마스터가%, 눈치채지지 않게 방안을 들여다 보면(자), %CALLNAME:ARG%가 자위에 빠지고 있었다


;----이하가 동거(同居) 자위의 지문----
;PRINTFORML 한밤중, %마스터는% 소리를 들어 눈을 떴다
;PRINTFORML ……%CALLNAME:LOCAL%가 %CALLNAME:MASTER%의 손을 잡으면서 소리를 눌러 참아 자위에 빠지고 있었다……
;----이것을 표시하고 나서 들어간다―----

PRINTFORM 옷을 하복부만 드러낸 %CALLNAME:ARG%는,

IF TALENT:ARG:연모
	PRINTFORM %CALLNAME:MASTER%의 이름을 부르고
;심약 계, 진면목계
ELSEIF CFLAG:ARG:성격경향 == 1 || CFLAG:ARG:성격경향 == 4
	PRINTFORM 소리를 참으
;강경세계
ELSEIF CFLAG:ARG:성격경향 == 2 || CFLAG:ARG:성격경향 == 3 || CFLAG:ARG:성격경향 == 5
	PRINTFORM 달콤한 소리를 높이
ENDIF
PRINTFORMW 면서, 손가락을 천천히 움직이고 있었다

;큰 가슴
IF TALENT:ARG:가슴사이즈 > 0
	PRINTFORM 출렁하고 흔들리는 풍만한 유방
;있고
ELSEIF TALENT:ARG:가슴사이즈 < 0
	PRINTFORM 부들부들 떨리는 평평한 앞가슴
;보통
ELSE
	PRINTFORM 몰캉하고 흔들리는 가슴
ENDIF
PRINTFORMW 을 어루만지며, 다리를 벌려 은밀한 곳에 손가락을 대는 %CALLNAME:ARG%
PRINTFORMW 그대로, 스윽하고 \@ !LOCAL:2 ?  은밀한 곳 # 아누스 \@에 중지를 찔러넣는 모습에 군침을 삼켰다
;PRINTFORMW 동시, 한편 응과 문에 이마가 아얏이라고 끝냈다
PRINTFORMDL 슬슬 한계에 이른 건지, %CALLNAME:ARG%가 %CALLNAME:MASTER%의 손을 쥐려고 하길래, 무심코 손을 맞잡아 버렸다

;PRINTFORMW %마스터가% 방안을 들여다 보면(자), %CALLNAME:ARG%가 자위에 빠지고 있었다
;PRINTFORML 내방자를 알아차린%CALLNAME:ARG%는 경직되어, 몸을 숨기는 것조차 잊어 %CALLNAME:MASTER% 쪽을 응시하고 있다……
PRINTFORML %마스터가% 일어났단 사실을 깨달은 %CALLNAME:ARG%는 그대로 굳어져서, 몸을 가리는 것조차 잊은 채 %CALLNAME:MASTER% 쪽을 바라보고 있었다……
CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 0,1)
PRINTFORMW 
$LOOP
CALL CHOICE("어쩌지? ","실례했습니다","봐줄 테니까 부디 계속","혼자 하는 것보단 둘이서 하는 게 더 기분 좋아")
IF RESULT == 0
	;PRINTFORML %마스터는% 눈앞의 광경을 망막에 새긴 다음, 동요하는 %CALLNAME:ARG%가 제 정신을 차리는 앞에 한마디 사과해 떠났다
	PRINTFORML %마스터는% 눈앞의 광경을 망막에 새긴 다음, 동요하는 %CALLNAME:ARG%가 제정신을 차리기 전에 사과 한마디 하고서, 아무것도 모르는 척 이불 안으로 들어갔다
	SIF !CFLAG:ARG:약점잡힘
		PRINTFORML %CALLNAME:ARG%의【약점】을 잡았다
	CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 1,1)
	CFLAG:ARG:딸딸이들킴 = 1
	CFLAG:ARG:약점잡힘 = 1
	;TIME += 5
ELSEIF RESULT == 1
	이루어무너뜨려필요치 = 껴안고필요치(ARG) - 50 + TALENT:ARG:수치심 * 50 - ABL:ARG:노출벽 * 30 - CFLAG:ARG:욕구불만도 / 20
	SIF  TALENT:ARG:자존심 > 0
		이루어무너뜨려필요치 += 100
	SIF CFLAG:ARG:기정사실 & 합의_우후후
		이루어무너뜨려필요치 -= 50
	SIF TALENT:ARG:담력 < 0
		이루어무너뜨려필요치 -= 200
	;실패
	IF CFLAG:ARG:합의판정 <= 이루어무너뜨려필요치
		GOTO GOOUT
	;성공
	ELSE
		CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 2,1)
		PRINTFORM 잠깐
		IF TALENT:ARG:연모
			PRINTFORM 기쁨과 당황스러움을 동시에 띄운 듯한
		;심약 계, 진면목계
		ELSEIF CFLAG:ARG:성격경향 == 1 || CFLAG:ARG:성격경향 == 4
			PRINTFORM 쭈뼛쭈뼛 부끄러운 듯한
		;강경세계, 솔직함계, 그 외
		ELSEIF CFLAG:ARG:성격경향 == 2 || CFLAG:ARG:성격경향 == 3 || CFLAG:ARG:성격경향 == 5
			PRINTFORM 놀람과 곤란함을 동시에 띄운 듯한 얼굴을 한
		ENDIF
		PRINTFORML %CALLNAME:ARG%가, 가볍게 한숨을 쉬었다
		IF TALENT:ARG:연인
			PRINTFORML 상의도 벗어 던지더니 %CALLNAME:MASTER%의 정면에서 다리를 활짝 벌렸다
		;심약 계, 진면목계
		ELSEIF CFLAG:ARG:성격경향 == 1 || CFLAG:ARG:성격경향 == 4
			PRINTFORML 부끄러운 듯이 상의를 아주 약간 풀어헤쳤지만, 다리는 벌리지 않았다
		;강경세계, 솔직함계, 그 외
		ELSEIF CFLAG:ARG:성격경향 == 2 || CFLAG:ARG:성격경향 == 3 || CFLAG:ARG:성격경향 == 5
			PRINTFORML 옷을 벗으면서, 중요한 부분은 손으로 가리고 있었다
		ENDIF
		PRINTFORML 그런 %CALLNAME:ARG%에게, 계속 하기를 재촉하는 %CALLNAME:MASTER%
		PRINTFORMW %CALLNAME:ARG%는 가볍게 한숨을 쉬더니, 손을 천천히 움직이기 시작했다

		PRINTFORML 질척이는 소리를 내며\@ !LOCAL:2 ?  질구 # 항문 \@을 메우는 중지
		;큰 가슴
		IF TALENT:가슴사이즈 > 0
			PRINTFORML 파묻힌 손가락에 의해서 모양이 시시각각 바뀌는 유방
		;있고
		ELSEIF TALENT:가슴사이즈 < 0
			PRINTFORML 손끝으로 문질러서 서버린 유두
		;보통
		ELSE
			PRINTFORML 손에 의해서 흔들리고 있는 가슴
		ENDIF
		PRINTFORMW 그 선정적인 광경을 한층 더 외설적으로 만드는 달콤한 목소리가, 울리기 시작했다
		IF TALENT:ARG:연인
			PRINTFORML 수치심 없는 듯이, %CALLNAME:MASTER%의 이름을 부르면서, 손가락을 격렬하게 움직이기 시작했다
			PRINTFORML 질퍽질퍽, 위와 아래의 입으로부터 군침을 늘어뜨리며, 황홀한 표정으로 %CALLNAME:MASTER%을 바라보는 %CALLNAME:ARG%
			PRINTFORMW 꿀꺽 침을 삼키는 %CALLNAME:MASTER%
			PRINTFORML 가슴을 주무르던 손과\@ !LOCAL ?  질구 # 항문 \@에 물려진 손가락의 움직임이 서서히 빨라진다
			PRINTFORMW 그 후, %CALLNAME:MASTER%의 이름을 부르면서, 온몸을 떨며 절정했다
		;심약 계, 진면목계
		ELSEIF CFLAG:ARG:성격경향 == 1 || CFLAG:ARG:성격경향 == 4
			PRINTFORML 부끄러운 듯이, 가슴과 \@ !LOCAL ?  은밀한 곳 # 아누스 \@를 주무르는 %CALLNAME:ARG%
			PRINTFORML 하지만, 발그레하게 혈색이 좋아지는 피부에, 한눈에 티날 정도로 서있는 유두에, 열락에 빠져있단 걸 엿볼 수 있었다
			PRINTFORMW 소리가 점차 커지며, 다리를 조금씩 벌렸다
			PRINTFORML %CALLNAME:MASTER%의 시선을 아직 눈치 못 챈 것인지, 손으로 가리기 힘들 정도로 다리를 벌렸다
			PRINTFORML 주르륵, 애액이 흐르고 동시에, 허벅지가 움찔하고 경련한다
			PRINTFORMW 너무나 갑작스레 애액을 뿜으며, %CALLNAME:ARG%는 절정에 도달했다
		;강경세계, 솔직함계, 그 외
		ELSEIF CFLAG:ARG:성격경향 == 2 || CFLAG:ARG:성격경향 == 3 || CFLAG:ARG:성격경향 == 5
			PRINTFORML 손을 대려고 접근하는 %CALLNAME:MASTER%에게, 보여주기만 할 뿐이라고 확실히 못을 박는 %CALLNAME:ARG%
			PRINTFORML 가슴을 주무르면서, 질척질척 음란한 소리를 내며,\@ !LOCAL:2 ?  은밀한 곳 # 아누스 \@을 만지작 거리고 있다
			PRINTFORMW 이쪽의 불만스러운 모습을 눈치챈 건지, %CALLNAME:ARG%는 한숨을 한 번 쉬더니 다리를 활짝 벌렸다
			PRINTFORML 뚝뚝 흘러넘치는 애액과 팽팽하게 서버린 클리토리스는 선정적이었고
			PRINTFORML 이쪽의 시선을 느낀 건지, %CALLNAME:ARG%의 손가락 움직임이 더 빨라졌다
			PRINTFORMW 갑자기, \@ !LOCAL:2 ?  질강 # 항강 \@에 깊게 손가락을 찌르며, %CALLNAME:ARG%는 절정했다
		ENDIF
	ENDIF
	PRINTFORML 바들바들, 허벅지를 경련하면서, 온몸을 떠는 %CALLNAME:ARG%
	;PRINTFORML 축 늘어져 한 그 모습에, 과연 손을 대는 것 꺼려진%마스터는% 그대로 돌아가기로 했다
	;PRINTFORML 모처럼이므로, 선물을 받아 돌아갑니까?
	PRINTFORML 축 늘어진 모습에, 아무래도 손 대기가 껄끄러워진 %마스터는% 그냥 그대로 자기로 했다
	PRINTFORML 모처럼이니, 선물을 받아갑니까?
	CALL ASK_YN
	IF !RESULT
		PRINTFORML 돌아갈 때, %마스터는% %CALLNAME:ARG%의 %PANTSNAME(EQUIP:ARG:하반신속옷2, ARG)%을 주워 품에 넣었다
		;TSTR:3 = %CALLNAME:ARG%{EQUIP:ARG:하반신속옷2}/
		;CSTR:MASTER:12 += TSTR:3
		CALL PANTS_GET(ARG)
	ENDIF
	
	CFLAG:ARG:딸딸이들킴 = 3
	CFLAG:ARG:호감도 += ABL:ARG:욕망 * CFLAG:ARG:욕구불만도 / 200 * ABL:ARG:노출벽
	;치정을 자위중독 레벨 준거로 올려
	CALL JUEL_UP_SPECIAL(ARG,"치정","자위중독", 30,1)
	;욕정을 자위중독 준거로 올려
	CALL JUEL_UP_SPECIAL(ARG,"욕정","자위중독", 30,1)
	EXP:ARG:노출쾌락경험 += CFLAG:ARG:욕구불만도 / 200 * ABL:ARG:노출벽
	EXP:ARG:자위경험 +=  CFLAG:ARG:욕구불만도 / 200 * ABL:ARG:노출벽
	;TIME += 27
ELSEIF RESULT == 2
	이루어무너뜨려필요치 = 껴안고필요치(ARG) - 150 + TALENT:ARG:수치심 * 30 - CFLAG:ARG:욕구불만도 / 20
	SIF  TALENT:ARG:자존심 > 0
		이루어무너뜨려필요치 += 50
	SIF CFLAG:ARG:기정사실 & 합의_우후후
		이루어무너뜨려필요치 -= 50
	SIF TALENT:ARG:담력 < 0
		이루어무너뜨려필요치 -= 200
	$ GOOUT
	IF CFLAG:ARG:합의판정 <= 이루어무너뜨려필요치
;		CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 3,0)
;		PRINTFORML %CALLNAME:ARG%는 알 수 없는 것을 마구 아우성쳐 %마스터를% 내쫓았다
		PRINTFORML %CALLNAME:ARG%는 도무지 뜻을 알 수 없는 말을 마구 소리치면서, %CALLNAME:MASTER%에게 베개를 내던지더니 그대로 누워 버렸다
		SIF !CFLAG:ARG:약점잡힘
			PRINTFORML %CALLNAME:ARG%의【약점】을 잡았다
		SIF MARK:ARG:반발각인 < 3
			MARK:ARG:반발각인 ++
		CFLAG:ARG:딸딸이들킴 = 1
		CFLAG:ARG:약점잡힘 = 1
		;TIME += 5
	ELSE
		CALL K17_NASIKUZUSI(ARG)
	ENDIF
ENDIF

;*********************************************************************************
;	이루어 무너뜨려
;	인수 0	：캐릭터 ID
;*********************************************************************************
@K17_NASIKUZUSI(ARG)
#DIM 전희1
;1=C 2=B 3=M
#DIM 전희2
#DIM 실전은어느쪽인가
#DIM 주입량
#DIM 호감도상승량
#DIM 경험증가수, 58
;0이라면 V, 1이라면 A
VARSET 경험증가수
CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 4,1)
LOCAL:1 = MIN(ABL:ARG:욕망, 10) + CFLAG:ARG:욕구불만도 / 200
;PRINTFORML %마스터는% 동요하는 %CALLNAME:ARG%를 뒷전으로 뒤에서 문을 닫아 쑥쑥(거침없이 나섬)과 마구 들어가 앉으면(자),
PRINTFORML %마스터는% 동요하는 %CALLNAME:ARG%를 뒷전으로 한 채 벌떡 일어나서는
PRINTFORMW %CALLNAME:ARG%를 껴안고 어떤 상상을 하면서 자위 하고 있었는지 물어봤다
PRINTFORM 그리고 그녀가 바랬던 대로,

IF TALENT:ARG:키스미경험
	전희1 = 3
	JUEL:ARG:4 += 100
	경험증가수:4 += 3 + ABL:ARG:M감각 * 2
	경험증가수:27 = 경험증가수:4
ELSEIF !RAND:3
	전희1 = 3
	경험증가수:4 += 3 + ABL:ARG:M감각 * 2
	경험증가수:27 = 경험증가수:4
	;M감각에 응해 쾌M추가
	CALL JUEL_UP_SPECIAL(ARG,"쾌M","M감각", 20)
ELSEIF ABL:ARG:C감각 >= ABL:ARG:B감각
	전희1 = 1
	;C감각에 응해 쾌C추가
	CALL JUEL_UP_SPECIAL(ARG,"쾌C","C감각", 20)
	경험증가수:0 += RAND:(LOCAL:1 * 2) 
	경험증가수:5 += 경험증가수:0 / 2
ELSE
	전희1 = 2
	;B감각에 응해 쾌B추가
	CALL JUEL_UP_SPECIAL(ARG,"쾌B","B감각", 20)
	경험증가수:3 += RAND:(LOCAL:1 * 2) 
	경험증가수:8 += 경험증가수:3 / 2
ENDIF

SELECTCASE 전희1
	CASE 1
		PRINTDATA
			DATAFORM 클리토리스를 잡고
			DATAFORM 클리토리스를 손끝으로 튕기며
			DATAFORM 음핵을 손끝으로 뭉개며
			DATAFORM 음핵을 빨아
		ENDDATA
	CASE 2
		PRINTDATA
			DATAFORM 유두를 손가락으로 잡고
			DATAFORM 가슴을 애무해
			DATAFORM 유방을 손으로 주무르며
			DATAFORM 유두를 혀로 굴리며
			DATAFORM 유두를 살짝 깨물고
		ENDDATA
	CASE 3
		PRINTDATA
			DATAFORM 머리카락을 쓰다듬으며
			DATAFORM 살며시
			DATAFORM 정열적으로
		ENDDATA
ENDSELECT
IF 전희1 == 3
	IF TALENT:ARG:키스미경험
		PRINTFORM 첫키스를 빼앗아
	ELSE
		PRINTFORM 입맞춤
	ENDIF
ENDIF
PRINT ,
실전은어느쪽인가 = 0
전희2 = RAND:3
IF !TALENT:ARG:처녀 & ABL:ARG:A감각 >= ABL:ARG:V감각
	실전은어느쪽인가 = 1
	전희2 += 10
ENDIF

SELECTCASE 전희2
	CASE 0
		PRINTFORM 음순의 주위를 더듬으며
	CASE 1
		PRINTFORM 질구에 얕게 손가락을 삽입해
	CASE 2
		PRINTFORM 질구를 혀로 후비며
	CASE 10
		PRINTFORM 엉덩이를 차분히 주무르며
	CASE 11
		PRINTFORM 항문의 주위를 더듬으며
	CASE 12
		PRINTFORM 항문에 얕게 손가락을 삽입해
ENDSELECT
PRINT ,

PRINTDATA
	DATAFORM 실컷 애태웠다
	DATAFORM 철저하게 보내 버렸다
	DATAFORM 음란한 말로 매도했다
ENDDATA
PRINTW
PRINT 그리고
PRINTDATA
	DATAFORM 엎드리게 시킨 뒤 등 뒤에서 짐승처럼 덮쳐서
	DATAFORM 정면에서 서로 껴안고
	DATAFORM 굴곡위 자세를 취하게 한 뒤
	DATAFORM 정면에서 서로 껴안고
ENDDATA
PRINTDATA
	DATAFORM 달콤한 말을 속삭여
	DATAFORM 상냥하게
	DATAFORM 몹시 거칠게
	DATAFORM 끈적끈적하게
ENDDATA

IF TALENT:ARG:처녀 && !실전은어느쪽인가
	PRINTFORM 순결을 빼앗아,
ELSE
	PRINTFORM {LOCAL:1}번
	PRINTDATA
		DATAFORM 범했다,
		DATAFORM 성교했다,
		DATAFORM 찔러댔다,
	ENDDATA
ENDIF

IF 실전은어느쪽인가
	주입량 = ABL:ARG:애널 * 40
	;A감각에 응해 쾌A추가
	CALL JUEL_UP_SPECIAL(ARG,"쾌A","A감각", 20)
	;JUEL:ARG:2 += JUEL_DEMAND_2(0,0, ARG) / 5
	경험증가수:21 += LOCAL:1
	경험증가수:17 += LOCAL:1
	경험증가수:7 += 2 * LOCAL:1
	경험증가수:2 += LOCAL:1 * 2
ELSE
	주입량 = ABL:ARG:질 * 40
	;V감각에 응해 쾌V추가
	CALL JUEL_UP_SPECIAL(ARG,"쾌V","V감각", 20,1)
	경험증가수:20 += LOCAL:1
	경험증가수:16 += LOCAL:1
	경험증가수:6 += 2 * LOCAL:1
	경험증가수:1 += 2 * LOCAL:1
ENDIF
주입량 += ABL:ARG:욕망 * LOCAL:1 * 3
주입량 = MIN(주입량, BASE:MASTER:정력)
;욕정을 욕망 준거로 올려
CALL JUEL_UP_SPECIAL(ARG,"욕정","욕망", 25)
BASE:MASTER:정력 = MAX(BASE:MASTER:정력 - 주입량, 0)
PRINTFORML \@실전은어느쪽인가 ?  애널# 질\@에{주입량}의 정액을 주입했다……
IF !실전은어느쪽인가
	CFLAG:ARG:누계질내정액 += 주입량
	EX:ARG:질내정액 += 주입량
	CALL SAMEN_SHOOT3(주입량 , MASTER, ARG)
ELSE
	CFLAG:ARG:누계애널정액 += 주입량
	EX:ARG:애널내정액 += 주입량
ENDIF
IF 전희1 == 3 
	SIF TALENT:MASTER:키스미경험
		CALL SET_FIRSTKISS(MASTER, ARG, 2)
	SIF TALENT:ARG:키스미경험
		CALL SET_FIRSTKISS(ARG, MASTER, 2, "분위기 타는 대로")
ENDIF
IF TALENT:ARG:처녀 == 1 && !실전은어느쪽인가
	SETCOLOR 247,171,166
	PRINTFORMW 【처녀상실】
	CALL SET_HISTORY_LOST_V(ARG, MASTER, "페니스", "자기 방", "분위기 타는 대로")
ENDIF
IF !CFLAG:ARG:애널처녀상실기념일 && 실전은어느쪽인가
	SETCOLOR 247,171,166
	PRINTFORMW 【애널 처녀상실】
	CALL SET_HISTORY_LOST_A(ARG, MASTER, "페니스", "자기 방", "분위기 타는 대로")
ENDIF
RESETCOLOR
FOR LOCAL, 0,58
	IF 경험증가수:LOCAL
		PRINTFORML %EXPNAME:LOCAL% ＋{경험증가수:LOCAL}
		EXP:ARG:LOCAL += 경험증가수:LOCAL
	ENDIF
NEXT
PRINTFORMW …
PRINTFORMW ……
PRINTFORMW ………

CALL KOJO_MESSAGE_SEND("EVENT", 26, ARG, 5,1)
;TIME += 117
EXP:MASTER:청소경험 ++
DOWNBASE:MASTER:체력 = LOCAL:1 * 80
DOWNBASE:MASTER:기력 = LOCAL:1 * 100
호감도상승량 = ABL:ARG:욕망 * CFLAG:ARG:욕구불만도 / 25
CFLAG:ARG:호감도 += 호감도상승량
PRINTFORML 호감도＋{호감도상승량}
CFLAG:ARG:욕구불만도 = 0

IF TALENT:ARG:연모
	;PRINTFORML 행위를 끝낸%마스터는% 일어서려고 했지만, %CALLNAME:ARG%는 아직 함께 있었으면 좋은 것 같다……
	PRINTFORML 행위를 끝낸 %마스터는% 슬슬 잠자리에 들려고 했지만, %CALLNAME:ARG%는 좀 더 해주길 바랬다……
	;CALL ASK_YN("그런데도 돌아가는","묵어 갈까")
	CALL ASK_YN("그래도 잘 거다","아침까지 노력해볼까")
	IF !RESULT
		GOTO BYEBYE
	ELSE
		;초대 플래그에 ARG를 대입
;		CFLAG:ARG:초대 = ARG
;		CFLAG:MASTER:초대 = ARG
;		;초기위치를 OMANEKIBEYA()=98로 한다
;		CFLAG:ARG:초기위치 = OMANEKIBEYA()
;		;이동시킨다
;		CFLAG:ARG:현재위치 = OMANEKIBEYA()
;		CFLAG:MASTER:현재위치 = OMANEKIBEYA()
		;IF NEMUKE() < 720
		CFLAG:MASTER:철야 = 1
;			PRINTFORML %마스터는% 오늘 하루%CALLNAME:ARG%로 보내기로 했다
;			PRINTFORML 당분간 함께 자, 일어나, 청소를 해, 러브러브 해, 식사를 만들어 먹고,
;			PRINTFORMW 또 러브러브 해, 섹스 해 잤다
		PRINTFORMDL %마스터는% 잠잘 시간도 쪼개서 %CALLNAME:ARG%랑 서로 사랑하기로 했다
		PRINTFORMDL 서로의 몸을 탐내는 데에 열중했더니, 어느새 평상시라면 기상했을 시간이 되어 있었다
		PRINTFORMDL 정신차리니 방안이 음미로운 향기로 가득 차있고, 서로의 더러움을 닦아낸 이불이나 옷이 여기저기 흩어져 있었다
		PRINTFORMDW 몇 번이나 절정에 도달해서, 이젠 눈의 초점도 이상해진 듯한 %CALLNAME:ARG%는, 간신히 만족한 듯이 잠들었다
		
		;요점 정밀히 조사 우선 본가 사양의 반으로
		VARSET 경험증가수
		IF 실전은어느쪽인가
			주입량 = ABL:ARG:애널 * MIN(ABL:ARG:친밀, 15) * 10 /2
			CALL JUEL_UP_SPECIAL(LOCAL,"쾌A","A감각", 20)
			경험증가수:21 += MIN(ABL:ARG:친밀, 15)
			경험증가수:17 += MIN(ABL:ARG:친밀, 15)
			경험증가수:7 += MIN(ABL:ARG:친밀, 15) * 2
			경험증가수:2 += MIN(ABL:ARG:친밀, 15) * 2
		ELSE
			주입량 = ABL:ARG:질 * MIN(ABL:ARG:친밀, 15) * 10 /2
			CALL JUEL_UP_SPECIAL(LOCAL,"쾌V","V감각", 20)
			경험증가수:20 += MIN(ABL:ARG:친밀, 15)
			경험증가수:16 += MIN(ABL:ARG:친밀, 15)
			경험증가수:6 += 2 * MIN(ABL:ARG:친밀, 15)
			경험증가수:1 += 2 * MIN(ABL:ARG:친밀, 15)
		ENDIF
		경험증가수:41 =  MIN(ABL:ARG:친밀, 15) * 2
		주입량 = MIN(주입량, BASE:MASTER:정력)
		;욕정을 욕망 준거로 올려
		CALL JUEL_UP_SPECIAL(ARG,"욕정","욕망", 20)
		BASE:MASTER:정력 = MAX(BASE:MASTER:정력 - 주입량, 0)
		IF !실전은어느쪽인가
			CFLAG:ARG:누계질내정액 += 주입량
			EX:ARG:질내정액 += 주입량
			CALL SAMEN_SHOOT3(주입량 , MASTER, ARG)
		ELSE
			CFLAG:ARG:누계애널정액 += 주입량
			EX:ARG:애널내정액 += 주입량
		ENDIF
		FOR LOCAL, 0,58
			IF 경험증가수:LOCAL
				PRINTFORML %EXPNAME:LOCAL% ＋{(경험증가수:LOCAL)/2}
				EXP:ARG:LOCAL += (경험증가수:LOCAL)/2
			ENDIF
		NEXT
;		DOWNBASE:MASTER:체력 += MIN(ABL:ARG:친밀, 15) * 40
;		DOWNBASE:MASTER:기력 += MIN(ABL:ARG:친밀, 15) * 60
		
		;이후에 철야 포함의 회복이 된다
		BASE:MASTER:체력 = 0
		BASE:MASTER:기력 = 0
		호감도상승량 = ABL:ARG:친밀 * 40
;			EXP:MASTER:청소경험 ++
;			EXP:MASTER:요리경험 ++
;			TIME += 360 - NEMUKE()
;		ELSE
;			PRINTFORML 졸려졌으므로, 그대로 %CALLNAME:ARG%과 함께 잤다
;			호감도상승량 = ABL:ARG:친밀 * 25
;		ENDIF
		CFLAG:ARG:호감도 += 호감도상승량/2
		PRINTFORML 호감도＋{호감도상승량/2}
;		CFLAG:MASTER:취침시간 = DAY * 1440 + TIME
		BEGIN AFTERTRAIN
		RETURN 1
	ENDIF
ENDIF

;TW당신은 정리하지 않고서는  견딜 수 없다
$BYEBYE
;PRINTFORMW %마스터는% 뒤처리를 해, 침상 위에서 보 차는 %CALLNAME:ARG%에, 굉장히 좋았다, 다음은 %GET_MAPNAME(MAIN_MAP)%로 하자고 해 떠났다
PRINTFORMW %마스터는% 뒤처리를 마치고, 침대 위에서 의식을 잃기 직전인 %CALLNAME:ARG%에게, 굉장히 좋았어, 라고 말한 뒤 잠들었다
IF !CFLAG:ARG:노팬티
	;PRINTFORML 모처럼이므로, 선물을 받아 돌아갑니까?
	PRINTFORML 모처럼이니, 선물을 받아 갑니까?
	CALL ASK_YN
	IF !RESULT
		PRINTFORML 돌아갈 때, %마스터는% %CALLNAME:ARG%의 %PANTSNAME(EQUIP:ARG:하반신속옷2, ARG)%를 주워 품에 넣었다
		CALL PANTS_GET(ARG)
	ENDIF
	CFLAG:ARG:딸딸이들킴 = 2
ENDIF
